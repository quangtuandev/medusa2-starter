import{r as u,b as q,c as z,d as G,e as K,R as Q}from"./chunk-OIYGIGL5-DA7B83DT.js";import{u as U,g as j,F as W,a as X}from"./zod-Dq-Shab3.js";var Y=(a,i=!0)=>{const r=new FormData;if(!a)return r;for(const[n,e]of Object.entries(a))if(e!==void 0){if(typeof FileList<"u"&&e instanceof FileList){for(let s=0;s<e.length;s++)r.append(n,e[s]);continue}if(Array.isArray(e)&&e.length>0&&e.every(s=>s instanceof File||s instanceof Blob)){for(let s=0;s<e.length;s++)r.append(n,e[s]);continue}if(e instanceof File||e instanceof Blob){r.append(n,e);continue}if(i){r.append(n,JSON.stringify(e));continue}if(typeof e=="string"){r.append(n,e);continue}if(e instanceof Date){r.append(n,e.toISOString());continue}r.append(n,JSON.stringify(e))}return r},tt=({submitHandlers:a,submitConfig:i,submitData:r,fetcher:n,stringifyAllValues:e=!0,...s})=>{var h,M;const[R,x]=u.useState(!1),V=q("/"),A=z(),J=G(),k=(h=n==null?void 0:n.submit)!=null?h:A,m=(M=n==null?void 0:n.data)!=null?M:J,t=U({...s,errors:m==null?void 0:m.errors}),S=K(),I=u.useMemo(()=>S.state!=="idle"&&S.formData!==void 0||(n==null?void 0:n.state)!=="idle"&&(n==null?void 0:n.formData)!==void 0,[S.state,S.formData,n==null?void 0:n.state,n==null?void 0:n.formData]),[T,w]=u.useState(!1);u.useEffect(()=>{I||w(!1)},[I]);const N=u.useMemo(()=>(o,l,c,d,v)=>{var f,g,p,b;w(!0),x(!0);const y=(f=i==null?void 0:i.encType)!=null?f:c,D=(p=(g=i==null?void 0:i.method)!=null?g:d)!=null?p:"post",_=(b=i==null?void 0:i.action)!=null?b:v,F={...o,...r},$=y==="application/json"?F:Y(F,e);k($,{...i,method:D,encType:y,action:_})},[k,i,r,e]),E=u.useMemo(()=>()=>{},[]),L=u.useMemo(()=>({get isDirty(){return t.formState.isDirty},get isLoading(){return t.formState.isLoading},get isSubmitted(){return t.formState.isSubmitted},get isSubmitSuccessful(){return R||t.formState.isSubmitSuccessful},get isSubmitting(){return T||t.formState.isSubmitting},get isValidating(){return t.formState.isValidating},get isValid(){return t.formState.isValid},get disabled(){return t.formState.disabled},get submitCount(){return t.formState.submitCount},get defaultValues(){return t.formState.defaultValues},get dirtyFields(){return t.formState.dirtyFields},get touchedFields(){return t.formState.touchedFields},get validatingFields(){return t.formState.validatingFields},get errors(){return t.formState.errors}}),[t.formState,R,T]),O=u.useMemo(()=>(o,l)=>{x(!1),t.reset(o,l)},[t.reset]),P=u.useMemo(()=>(o,l)=>{var c;const d=(c=j(m==null?void 0:m.defaultValues,o))!=null?c:j(t.formState.defaultValues,o);return{...t.register(o,l),...!(l!=null&&l.disableProgressiveEnhancement)&&{defaultValue:typeof d=="string"?d:void 0,defaultChecked:typeof d=="boolean"?d:void 0}}},[t.register,m==null?void 0:m.defaultValues,t.formState.defaultValues]),B=u.useMemo(()=>o=>{var l,c,d,v,f;const g=(l=o==null?void 0:o.currentTarget)==null?void 0:l.enctype,p=(c=o==null?void 0:o.currentTarget)==null?void 0:c.method,b=(d=o==null?void 0:o.currentTarget)==null?void 0:d.action.replace(`${window.location.origin}${V==="/"?"":V}`,""),y=(v=a==null?void 0:a.onValid)!=null?v:N,D=(f=a==null?void 0:a.onInvalid)!=null?f:E;return t.handleSubmit((_,F)=>y(_,F,g,p,b),D)(o)},[t.handleSubmit,a,N,E,V]);return u.useMemo(()=>({...t,handleSubmit:B,reset:O,register:P,formState:L}),[t,B,O,P,L])},et=({children:a,...i})=>Q.createElement(W,{...i},a),nt=()=>{const a=X();return{...a,handleSubmit:a.handleSubmit}};export{et as R,tt as a,nt as u};
