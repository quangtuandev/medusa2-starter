import{r as u,b as q,c as z,d as G,e as K,R as Q,j as U}from"./chunk-OIYGIGL5-DCgkdKKb.js";import{B as W}from"./Button-E-8QNY68.js";import{u as X,g as P,F as Y,a as Z}from"./zod-v2Wtl3bk.js";var H=(o,r=!0)=>{const a=new FormData;if(!o)return a;for(const[n,e]of Object.entries(o))if(e!==void 0){if(typeof FileList<"u"&&e instanceof FileList){for(let s=0;s<e.length;s++)a.append(n,e[s]);continue}if(Array.isArray(e)&&e.length>0&&e.every(s=>s instanceof File||s instanceof Blob)){for(let s=0;s<e.length;s++)a.append(n,e[s]);continue}if(e instanceof File||e instanceof Blob){a.append(n,e);continue}if(r){a.append(n,JSON.stringify(e));continue}if(typeof e=="string"){a.append(n,e);continue}if(e instanceof Date){a.append(n,e.toISOString());continue}a.append(n,JSON.stringify(e))}return a},at=({submitHandlers:o,submitConfig:r,submitData:a,fetcher:n,stringifyAllValues:e=!0,...s})=>{var h,x;const[R,M]=u.useState(!1),V=q("/"),A=z(),J=G(),k=(h=n==null?void 0:n.submit)!=null?h:A,c=(x=n==null?void 0:n.data)!=null?x:J,t=X({...s,errors:c==null?void 0:c.errors}),S=K(),B=u.useMemo(()=>S.state!=="idle"&&S.formData!==void 0||(n==null?void 0:n.state)!=="idle"&&(n==null?void 0:n.formData)!==void 0,[S.state,S.formData,n==null?void 0:n.state,n==null?void 0:n.formData]),[I,T]=u.useState(!1);u.useEffect(()=>{B||T(!1)},[B]);const j=u.useMemo(()=>(i,l,m,d,v)=>{var f,g,p,b;T(!0),M(!0);const y=(f=r==null?void 0:r.encType)!=null?f:m,D=(p=(g=r==null?void 0:r.method)!=null?g:d)!=null?p:"post",_=(b=r==null?void 0:r.action)!=null?b:v,F={...i,...a},$=y==="application/json"?F:H(F,e);k($,{...r,method:D,encType:y,action:_})},[k,r,a,e]),w=u.useMemo(()=>()=>{},[]),E=u.useMemo(()=>({get isDirty(){return t.formState.isDirty},get isLoading(){return t.formState.isLoading},get isSubmitted(){return t.formState.isSubmitted},get isSubmitSuccessful(){return R||t.formState.isSubmitSuccessful},get isSubmitting(){return I||t.formState.isSubmitting},get isValidating(){return t.formState.isValidating},get isValid(){return t.formState.isValid},get disabled(){return t.formState.disabled},get submitCount(){return t.formState.submitCount},get defaultValues(){return t.formState.defaultValues},get dirtyFields(){return t.formState.dirtyFields},get touchedFields(){return t.formState.touchedFields},get validatingFields(){return t.formState.validatingFields},get errors(){return t.formState.errors}}),[t.formState,R,I]),N=u.useMemo(()=>(i,l)=>{M(!1),t.reset(i,l)},[t.reset]),L=u.useMemo(()=>(i,l)=>{var m;const d=(m=P(c==null?void 0:c.defaultValues,i))!=null?m:P(t.formState.defaultValues,i);return{...t.register(i,l),...!(l!=null&&l.disableProgressiveEnhancement)&&{defaultValue:typeof d=="string"?d:void 0,defaultChecked:typeof d=="boolean"?d:void 0}}},[t.register,c==null?void 0:c.defaultValues,t.formState.defaultValues]),O=u.useMemo(()=>i=>{var l,m,d,v,f;const g=(l=i==null?void 0:i.currentTarget)==null?void 0:l.enctype,p=(m=i==null?void 0:i.currentTarget)==null?void 0:m.method,b=(d=i==null?void 0:i.currentTarget)==null?void 0:d.action.replace(`${window.location.origin}${V==="/"?"":V}`,""),y=(v=o==null?void 0:o.onValid)!=null?v:j,D=(f=o==null?void 0:o.onInvalid)!=null?f:w;return t.handleSubmit((_,F)=>y(_,F,g,p,b),D)(i)},[t.handleSubmit,o,j,w,V]);return u.useMemo(()=>({...t,handleSubmit:O,reset:N,register:L,formState:E}),[t,O,N,L,E])},it=({children:o,...r})=>Q.createElement(Y,{...r},o),C=()=>{const o=Z();return{...o,handleSubmit:o.handleSubmit}};const rt=({children:o,...r})=>{const{formState:a}=C();return U.jsx(W,{variant:"primary",type:"submit",disabled:a.isSubmitting,...r,children:o||(a.isSubmitting?"Submitting...":"Submit")})};export{it as R,rt as S,at as a,C as u};
