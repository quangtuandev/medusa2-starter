import{r as p,R as F,j as h}from"./chunk-OIYGIGL5-DA7B83DT.js";import{Y as S,o as N,y as _,n as D,a as T,K as I}from"./use-is-mounted-CV1LEgbp.js";import{g as L,f as E,a as P,b as O,s as $}from"./PlusIcon-DaKNzPhp.js";import{m as w,g as R,a as B}from"./meta-DdeOJusI.js";import{P as A}from"./ProductThumbnail-M0mvowGg.js";let W=p.createContext(void 0);function k(){return p.useContext(W)}function z(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function b(t){return z(t)&&"tagName"in t}function x(t){return b(t)&&"accessKey"in t}function et(t){return b(t)&&"tabIndex"in t}function nt(t){return b(t)&&"style"in t}function rt(t){return x(t)&&t.nodeName==="IFRAME"}function ot(t){return x(t)&&t.nodeName==="INPUT"}function it(t){return x(t)&&t.nodeName==="LABEL"}function st(t){return x(t)&&t.nodeName==="FIELDSET"}function at(t){return x(t)&&t.nodeName==="LEGEND"}function ct(t){return b(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}let M=p.createContext(null);M.displayName="DescriptionContext";function j(){let t=p.useContext(M);if(t===null){let n=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,j),n}return t}function ut(){var t,n;return(n=(t=p.useContext(M))==null?void 0:t.value)!=null?n:void 0}function lt(){let[t,n]=p.useState([]);return[t.length>0?t.join(" "):void 0,p.useMemo(()=>function(e){let i=N(c=>(n(s=>[...s,c]),()=>n(s=>{let a=s.slice(),u=a.indexOf(c);return u!==-1&&a.splice(u,1),a}))),o=p.useMemo(()=>({register:i,slot:e.slot,name:e.name,props:e.props,value:e.value}),[i,e.slot,e.name,e.props,e.value]);return F.createElement(M.Provider,{value:o},e.children)},[n])]}let K="p";function Y(t,n){let e=p.useId(),i=k(),{id:o=`headlessui-description-${e}`,...c}=t,s=j(),a=_(n);D(()=>s.register(o),[o,s.register]);let u=T({...s.slot,disabled:i||!1}),d={ref:a,...s.props,id:o};return I()({ourProps:d,theirProps:c,slot:u,defaultTag:K,name:s.name||"Description"})}let q=S(Y),dt=Object.assign(q,{});const G=(t,n)=>{if(!n)return;const e=n.join("|");return t[e]},H=t=>{if(!t)return;const{original:n,calculated:e}=O(t);if(!n||!e||e>=n)return;const i=n-e,o=i/n*100;return{valueOff:i,percentageOff:o}},C=t=>{var o;if(!t.length)return[[]];const[n,...e]=t,i=C(e);return((o=n.values)==null?void 0:o.reduce((c,s)=>{const a=s.value,u=i.map(d=>[a,...d]);return[...c,...u]},[]))||[]},ft=t=>{const n=t.options||[],e=t.variants||[],i={};return C(n).forEach(c=>{const s=c.join("|"),a=e.find(u=>{var d;return(d=u.options)==null?void 0:d.every(m=>c.includes(m.value))});a&&(i[s]=a)}),i};function pt(t,n,e){var m,g;const i=t.options||[],o=i.findIndex(r=>r.id===e);if(o===0){const r=i.find(l=>l.id===e);return(r==null?void 0:r.values)||[]}const c=i.slice(0,o).map(r=>r.id).filter(Boolean),s=Object.entries(n).filter(([r,l])=>c.includes(r)&&l!=="");if(s.length===0){const r=i.find(l=>l.id===e);return(r==null?void 0:r.values)||[]}const a=(m=t.variants)==null?void 0:m.filter(r=>s.every(([l,f])=>{var y;const v=(y=r.options)==null?void 0:y.find(V=>V.option_id===l);return v?v.value===f:!0})),u=new Set;a==null||a.forEach(r=>{var f,v;const l=(v=(f=r.options)==null?void 0:f.find(y=>y.option_id===e))==null?void 0:v.value;l&&u.add(l)});const d=i.find(r=>r.id===e);return((g=d==null?void 0:d.values)==null?void 0:g.filter(r=>u.has(r.value)))||[]}const mt=(t,n,e,i,o)=>{var a;const c=o&&t===o.length-1,s=(a=e[0])==null?void 0:a.option_id;return e.map(u=>{if(!c){const g=Object.values(i).filter(r=>{var l;return(l=r.options)==null?void 0:l.some(f=>f.option_id===s&&f.value===u.value)});if(g.length>0){const r=g.map(f=>P(f)),l=[...new Set(r)].sort((f,v)=>f-v);if(l.length>1){const f=l[0],v=l[l.length-1];return{...u,minPrice:f,maxPrice:v}}else return{...u,minPrice:l[0],maxPrice:l[0]}}}const d=o==null?void 0:o.map((g,r)=>r===t?u.value:g),m=G(i,d);if(m){const g=P(m),r=H(m);return{...u,exactPrice:g,discountPercentage:r!=null&&r.percentageOff?Math.round(r.percentageOff):void 0}}return{...u}})};function gt(t,n){var i;const e=Object.entries(n).filter(([o,c])=>c!=="");if(e.length!==0)return(i=t.variants)==null?void 0:i.find(o=>e.every(([c,s])=>{var u;const a=(u=o.options)==null?void 0:u.find(d=>d.option_id===c);return(a==null?void 0:a.value)===s}))}const U=({data:t,matches:n})=>{var r,l,f;const i=(r=n[0].data)==null?void 0:r.region,o=t.product,c=L(o);if(!o)return[];const s=o.title,a=o.description,u=s,d=a,m=o.thumbnail||((f=(l=o.images)==null?void 0:l[0])==null?void 0:f.url),g=m?`${s} product thumbnail`:void 0;return[{title:s},{name:"description",content:a},{property:"og:title",content:u},{property:"og:description",content:d},{property:"og:image",content:m},{property:"og:image:alt",content:g},{property:"og:type",content:"product"},{property:"product:price:currency",content:i.currency_code},{property:"product:price:amount",content:E(P(c),{currency:i.currency_code})}]},vt=w(B,R,U),ht=({product:t,currencyCode:n})=>{const e=p.useMemo(()=>$(t),[t,n]),i=e[0],o=e[e.length-1],c=p.useMemo(()=>P(i),[e]),s=p.useMemo(()=>P(o),[e]),a=c!==s;return h.jsx(h.Fragment,{children:a?h.jsxs(h.Fragment,{children:[E(c,{currency:n}),s&&s>c?h.jsxs(h.Fragment,{children:["â€“",E(s,{currency:n})]}):""]}):h.jsx(A,{variant:i,currencyCode:n})})};export{at as E,lt as H,ct as L,dt as M,ht as P,st as a,k as b,G as c,pt as d,vt as e,gt as f,mt as g,et as i,ot as l,it as m,x as n,nt as r,ft as s,b as t,rt as u,ut as w};
