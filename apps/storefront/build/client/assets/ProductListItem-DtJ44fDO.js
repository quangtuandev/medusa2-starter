import{j as r,f as F,r as b}from"./chunk-OIYGIGL5-lvf-TMgM.js";import{c as d}from"./clsx-B-dksMZM.js";import{F as w,b as I,d as N}from"./prices-DMHxn0dT.js";import{u as C,P as D}from"./ProductVariantPrice-Do2c6SQL.js";import{u as A,M as B}from"./MorphingShape-B1403ltC.js";import{F as O}from"./PlusIcon-CCq4D1Ci.js";import{I as P}from"./Image-D0dBiRb2.js";const U=({className:t,...e})=>r.jsx("article",{className:d(t,"group"),...e,children:r.jsx("figure",{className:"aspect-w-1 aspect-h-1 h-full w-full overflow-hidden rounded-lg border",children:r.jsx("div",{className:"h-full w-full bg-gray-200 object-cover object-center group-hover:opacity-75"})})}),_=()=>{var o,a;const t=F({key:w.cart.createLineItem});return{addToCart:n=>{const s=new FormData;s.append("productId",n.productId),s.append("quantity",String(n.quantity||1)),n.options&&Object.entries(n.options).forEach(([l,i])=>{s.append(`options.${l}`,i)}),t.submit(s,{method:"post",action:"/api/cart/line-items/create"})},isLoading:t.state==="submitting"||t.state==="loading",error:(o=t.data)==null?void 0:o.errors,cart:(a=t.data)==null?void 0:a.cart,state:t.state}},T=({product:t,selectedOptions:e={},quantity:o=1,disabled:a=!1,className:n,variant:s="primary",size:l="md"})=>{const{t:i}=A(),{addToCart:u,isLoading:v}=_(),{toggleCartDrawer:x}=C(),h=g=>{g.preventDefault(),u({productId:t.id,options:e,quantity:o}),x(!0)},f=a||v,p="font-medium rounded-[100px] transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center p-2",m={primary:{enabled:"bg-black text-white hover:bg-gray-800 focus:ring-gray-500",disabled:"bg-gray-300 text-gray-500 cursor-not-allowed"},secondary:{enabled:"bg-white text-black border border-black hover:bg-gray-50 focus:ring-gray-500",disabled:"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed"}},c=d(p,f?m[s].disabled:m[s].enabled,n);return r.jsxs("button",{onClick:h,disabled:f,className:c,"aria-label":`${i("common.addToCart")} ${t.title}`,children:[r.jsx("i",{className:"w-4",children:r.jsx(O,{className:"size-1"})}),r.jsx("span",{className:"text-nowrap btn-add opacity-0 w-0 h-0 transition-all duration-300 group-hover/product-card:opacity-100 group-hover/product-card:w-auto group-hover/product-card:h-auto",children:" Add to cart"})]})},k=({className:t})=>r.jsx("div",{className:d("inline-flex items-center rounded-md border border-gray-200 bg-gray-200 px-1.5 py-0.5 text-xs font-bold text-gray-600",t),children:"Sold out"}),M=t=>b.useMemo(()=>{var a,n;const e=((a=t.variants)==null?void 0:a.reduce((s,l)=>l.allow_backorder||!l.manage_inventory?1/0:s+(l.inventory_quantity||0),0))??0;return{averageInventory:e/(((n=t==null?void 0:t.variants)==null?void 0:n.length)??1),totalInventory:e}},[t]),z=({product:t,className:e})=>{const a=M(t).averageInventory===0;return r.jsx("div",{className:e,children:a&&r.jsx(k,{})})},L=({product:t,currencyCode:e,...o})=>{const a=b.useMemo(()=>o.variant||I(t),[o.variant,t,e]);return a?r.jsx(D,{variant:a,currencyCode:e}):null},E={BLOSSOM:{colorStart:"#FFFFFF",colorEnd:"#6DCB8F",offsetStart:8.85,offsetEnd:79.19},SAFFRON:{colorStart:"#BEB1F8",colorEnd:"#8F5DDB",offsetStart:8.85,offsetEnd:79.19},HAZE:{colorStart:"#BFFAED",colorEnd:"#BBEE7C",offsetStart:8.85,offsetEnd:79.19},RICE:{colorStart:"#EEF7FF",colorEnd:"#A2D4FD",offsetStart:8.85,offsetEnd:79.19},LATTE:{colorStart:"#E4E3D8",colorEnd:"#89E4BB",offsetStart:8.85,offsetEnd:79.19},COFFEE:{colorStart:"#F5DDDD",colorEnd:"#FFB578",offsetStart:8.85,offsetEnd:79.19}},R=(t=null)=>{const e=t?E[t]:Object.values(E),o=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e;return{blur:20,zoom:.42,className:"flex justify-center",id:Math.random().toString(36).substring(2,15),...o}},W=t=>{let e=t.trim();if(e.includes(" ")){const[s,...l]=e.split(/\s+/);return[s,"_"+l.join(" ")]}const o=Math.floor(e.length/2),a=e.slice(0,o),n=e.slice(o);return[a,"_"+n]},q=({product:t,className:e,isTransitioning:o,...a})=>{const n=t.images&&t.images[0]&&t.images[0].url||t.thumbnail,s=t.images&&t.images[1]&&t.images[1].url;return r.jsxs("figure",{className:d("product-thumbnail","aspect-w-1 aspect-h-1 w-full overflow-hidden",e),style:{viewTransitionName:o?"product-thumbnail":void 0},...a,children:[r.jsx(B,{...R(t.subtitle)}),n?r.jsx(P,{loading:"lazy",src:n,alt:t.title,className:d("h-full w-full object-cover object-center transition-all duration-300 -rotate-[14deg]",{"group-hover/product-card:opacity-75":!s})}):r.jsx("div",{className:"flex h-full w-full items-center justify-center object-cover object-center group-hover/product-card:opacity-75",children:"No Image"})]})},H={SIZE:"Size"},X=({product:t,className:e,isTransitioning:o,...a})=>{var f,p,m;const{region:n}=N(),[s,l]=b.useState(null),i=(f=t.options)==null?void 0:f.find(c=>c.title===H.SIZE),u={};s&&i&&(u[i==null?void 0:i.id]=s);const x=!(i&&i.values&&i.values.length>0)||s,h=(p=t.variants)==null?void 0:p.find(c=>Object.entries(u).every(([g,S])=>{var y;return(y=c.options)==null?void 0:y.some(j=>j.option_id===g&&j.value===S)}));return h?r.jsxs("article",{className:d(e,"group/product-card text-left rounded-[32px] p-4 pb-6 overflow-hidden bg-white shadow-[5px_5px_10px_0px_#00000040]"),...a,children:[r.jsxs("div",{className:"relative",children:[r.jsx(z,{className:"absolute right-2 top-2 z-10 flex gap-2",product:t}),r.jsx(q,{isTransitioning:o,product:t})]}),r.jsx("h4",{className:"mt-4 overflow-hidden text-ellipsis font-extrabold font-title group-hover/product-card:text-[36px] transition-all duration-300 text-[28px]",children:t.title}),r.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[r.jsx("div",{className:"flex gap-2 justify-center items-center",children:(m=i==null?void 0:i.values)==null?void 0:m.map(c=>r.jsx("span",{className:d("text-sm font-light  border border-[#716E6E] rounded-full px-2 py-1 hover:text-[#716E6E] hover:border-black text-[10px] font-display leading-none",{"!text-black !border-black bg-highlight":s===c.value}),onClick:g=>{l(c.value),g.preventDefault()},children:c.value},c.id))}),r.jsx(T,{product:t,selectedOptions:u,disabled:!x,variant:"primary"})]}),r.jsx("p",{className:"mt-1 text-lg font-extrabold font-title leading-none tracking-normal hover:text-[]",children:r.jsx(L,{product:t,variant:h,currencyCode:n.currency_code})})]}):null};export{U as E,X as P,L as a,W as g,R as r,M as u};
