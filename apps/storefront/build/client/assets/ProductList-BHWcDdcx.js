import{j as s,r as l,N as P,f as C,h as S}from"./chunk-OIYGIGL5-Dw2D8vFu.js";import{C as T}from"./Container-Cka58j8f.js";import{u as F,S as I}from"./useScrollArrows-CU6QiFGF.js";import{c as f}from"./clsx-B-dksMZM.js";import{E as L,P as k}from"./ProductListItem-CSSURxE5.js";import{B as A}from"./Button-nspP1mxw.js";import{W as B,d as m}from"./tabs-W0_EixNg.js";import{b as E}from"./buildSearchParamsFromObject-CBTBPTA3.js";const z=({length:e})=>s.jsx("div",{className:"xs:grid-cols-2 grid grid-cols-1 gap-y-10 gap-x-6 md:!grid-cols-3 xl:!grid-cols-4 xl:gap-x-8",children:Array.from({length:e},(r,t)=>s.jsx(L,{},t))}),R=l.memo(({products:e})=>s.jsx(s.Fragment,{children:e.map(r=>s.jsx("div",{className:"xs:w-[31.2%] xs:snap-start mr-6 inline-block w-[100%] snap-center last:mr-0 sm:mr-6 sm:snap-start md:w-[31.2%] xl:mr-8 xl:w-[23%]",children:s.jsx(P,{prefetch:"viewport",to:`/products/${r.handle}`,viewTransition:!0,children:({isTransitioning:t})=>s.jsx(k,{isTransitioning:t,product:r})})},r.id))})),D=({products:e,className:r})=>{const{scrollableDivRef:t,...n}=F({buffer:100,resetOnDepChange:[e]});return e?s.jsxs("div",{className:f("product-carousel relative",r),children:[s.jsx("div",{ref:t,className:"w-full snap-both snap-mandatory overflow-x-auto whitespace-nowrap pb-2 sm:snap-proximity",children:s.jsx(R,{products:e})}),s.jsx(I,{className:"-mt-12",...n})]}):s.jsx(z,{length:4})},u=l.forwardRef(({selected:e,className:r,...t},n)=>s.jsx(A,{ref:n,size:"sm",className:f("whitespace-nowrap !rounded-full",{"!bg-white !text-gray-700 shadow-sm":e,"!text-primary-600 hover:!text-primary-800 hover:!bg-primary-100 !border-transparent !bg-transparent":!e},r),...t})),y=({className:e,...r})=>s.jsx(B,{className:f("bg-primary-50 mb-2 inline-flex w-auto max-w-full snap-x gap-0.5 overflow-auto rounded-full px-2 py-1.5",e),...r}),O=({categories:e,...r})=>e!=null&&e.length?s.jsx(m.Group,{...r,children:s.jsxs(y,{children:[s.jsx(m,{as:l.Fragment,children:({selected:t})=>s.jsx(u,{selected:t,children:"All"})}),e.map(t=>s.jsx(m,{as:l.Fragment,children:({selected:n})=>s.jsx(u,{selected:n,children:t.name})},t.id))]})}):null,$=({collections:e,...r})=>e!=null&&e.length?s.jsx(m.Group,{...r,children:s.jsxs(y,{children:[s.jsx(m,{as:l.Fragment,children:({selected:t})=>s.jsx(u,{selected:t,children:"All"})}),e.map(t=>s.jsx(m,{as:l.Fragment,children:({selected:n})=>s.jsx(u,{selected:n,children:t.title})},t.id))]})}):null,G=()=>{const[e,r]=l.useState(!1),[t,n]=l.useState(void 0),o=C(),w=S(),{collection_tabs:i,category_tabs:c,products:x}=o.data||{},h=w.productHandle?x==null?void 0:x.filter(a=>a.handle!==w.productHandle):x,j=!!(i!=null&&i.length),b=!!(c!=null&&c.length),v=e&&!(h!=null&&h.length),g=a=>{const p=E({subloader:"productList",data:JSON.stringify({content:a})});o.load(`/api/page-data?${p}`)};l.useEffect(()=>{o.data||o.state==="loading"||g()},[]);const N=(a,p)=>{if(p==="collection"){const d=i==null?void 0:i[a-1];n(a),g({collection_id:[d==null?void 0:d.id]})}if(p==="category"){const d=c==null?void 0:c[a-1];n(a),g({category_id:[d==null?void 0:d.id]})}};return l.useEffect(()=>{!e&&o.data&&r(!0)},[o.data]),s.jsxs(s.Fragment,{children:[j&&s.jsx("div",{className:"pb-6",children:s.jsx($,{selectedIndex:t,collections:i,onChange:a=>N(a,"collection")})}),b&&s.jsxs("div",{className:"pb-6",children:[s.jsx(O,{selectedIndex:t,categories:c,onChange:a=>N(a,"category")})," "]}),v&&s.jsx("div",{className:"mb-8 mt-8",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["There are no products to show",j||b?` in this ${j?"collection":"category"}.`:""]})}),!v&&s.jsx(D,{products:h})]})},V=l.memo(({className:e,heading:r,text:t,actions:n,...o})=>s.jsx("section",{className:f("mkt-section relative overflow-x-hidden",e),...o,children:s.jsx("div",{className:"mkt-section__inner relative z-[2]",children:s.jsxs(T,{children:[s.jsxs("p",{className:"text-center mb-12",children:[s.jsx("span",{className:"text-5xl font-title font-extrabold text-64px leading-48px uppercase",children:"Something"}),s.jsx("span",{className:"text-6xl font-centuryBook italic text-64px leading-48px pl-2",children:"New?"})]}),s.jsx(G,{...o})]})})}));export{V as P};
