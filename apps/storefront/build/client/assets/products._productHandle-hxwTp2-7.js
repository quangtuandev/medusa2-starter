import{r as l,R as S,j as t,l as We,h as Ve,w as He,u as Qe}from"./chunk-OIYGIGL5-DCgkdKKb.js";import{P as ze}from"./ProductList-BV6Tdwqd.js";import{B as ue}from"./Button-E-8QNY68.js";import{C as me}from"./Container-CwGEGTs5.js";import{G as Ze,a as pe}from"./GridColumn-uvIYSbIX.js";import{u as Ke,a as Ye,R as Xe,S as fe}from"./SubmitButton-CSe2QbSv.js";import{n as Je,Q as et}from"./QuantitySelector-CUhvbZM0.js";import{I as je}from"./Image-Bcn-QzFe.js";import{F as tt,L as ye,S as rt,R as st,f as nt}from"./formatters-BBrzIyNo.js";import{u as at}from"./useScrollArrows-B2hyYdh2.js";import{c as Q}from"./clsx-B-dksMZM.js";import{M as it}from"./MorphingShape-BwhVl6mM.js";import{r as ot,a as lt,u as ct,g as dt,b as ut}from"./ProductListItem-_AQZUiwL.js";import{$ as we,a as Ne,B as mt,W as pt,d as Pe,j as ft,K as xt}from"./tabs-D4HrBTLt.js";import{o as W,p as ht,b as Ce,m as gt,s as Re,Y as K,y as Y,n as ae,a as X,K as J,g as Se,V as ke,u as vt,c as V,h as re,v as xe,T as Z,d as he,G as bt}from"./use-is-mounted-CDs0S30a.js";import{a as jt,E as Ie,b as ie,L as yt,m as ge,l as wt,M as Nt,w as Pt,H as Oe}from"./description-2W3FHUaM.js";import{r as $e}from"./index-ryUWhltf.js";import{f as M,s as Ct,b as z,a as Rt,g as St}from"./prices-DJiVn0T5.js";import{P as kt}from"./pagination-with-context-ycWPTcm3.js";import{u as It}from"./useCart-5kzPSyqF.js";import{a as Ot,F as $t}from"./useRegion-Bk1_9y5j.js";import{o as _t,r as Et,s as se,b as Ft}from"./zod-v2Wtl3bk.js";import{m as Lt,g as Tt,a as Dt}from"./meta-DdeOJusI.js";import"./PlusIcon-A66bXQM6.js";import"./ArrowRightIcon-CQJJhLrP.js";import"./IconButton-BcxydhMr.js";import"./context-BmMhycnk.js";import"./animation-BrpFQVme.js";function Bt(e,r,s){let[n,a]=l.useState(s),u=e!==void 0,c=l.useRef(u),o=l.useRef(!1),i=l.useRef(!1);return u&&!c.current&&!o.current?(o.current=!0,c.current=u,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!u&&c.current&&!i.current&&(i.current=!0,c.current=u,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[u?e:n,W(d=>(u||$e.flushSync(()=>a(d)),r==null?void 0:r(d)))]}function Mt(e){let[r]=l.useState(e);return r}function _e(e={},r=null,s=[]){for(let[n,a]of Object.entries(e))Fe(s,Ee(r,n),a);return s}function Ee(e,r){return e?e+"["+r+"]":r}function Fe(e,r,s){if(Array.isArray(s))for(let[n,a]of s.entries())Fe(e,Ee(r,n.toString()),a);else s instanceof Date?e.push([r,s.toISOString()]):typeof s=="boolean"?e.push([r,s?"1":"0"]):typeof s=="string"?e.push([r,s]):typeof s=="number"?e.push([r,`${s}`]):s==null?e.push([r,""]):Gt(s)&&!l.isValidElement(s)&&_e(s,r,e)}function At(e){var r,s;let n=(r=e==null?void 0:e.form)!=null?r:e.closest("form");if(n){for(let a of n.elements)if(a!==e&&(a.tagName==="INPUT"&&a.type==="submit"||a.tagName==="BUTTON"&&a.type==="submit"||a.nodeName==="INPUT"&&a.type==="image")){a.click();return}(s=n.requestSubmit)==null||s.call(n)}}function Gt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let r=Object.getPrototypeOf(e);return r===null||Object.getPrototypeOf(r)===null}let qt=l.createContext(null);function Ut({children:e}){let r=l.useContext(qt);if(!r)return S.createElement(S.Fragment,null,e);let{target:s}=r;return s?$e.createPortal(S.createElement(S.Fragment,null,e),s):null}function Wt({data:e,form:r,disabled:s,onReset:n,overrides:a}){let[u,c]=l.useState(null),o=ht();return l.useEffect(()=>{if(n&&u)return o.addEventListener(u,"reset",n)},[u,r,n]),S.createElement(Ut,null,S.createElement(Vt,{setForm:c,formId:r}),_e(e).map(([i,d])=>S.createElement(Ce,{features:Re.Hidden,...gt({key:i,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,disabled:s,name:i,value:d,...a})})))}function Vt({setForm:e,formId:r}){return l.useEffect(()=>{if(r){let s=document.getElementById(r);s&&e(s)}},[e,r]),r?null:S.createElement(Ce,{features:Re.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:s=>{if(!s)return;let n=s.closest("form");n&&e(n)}})}let Ht=l.createContext(void 0);function Le(){return l.useContext(Ht)}function Te(e){let r=e.parentElement,s=null;for(;r&&!jt(r);)Ie(r)&&(s=r),r=r.parentElement;let n=(r==null?void 0:r.getAttribute("disabled"))==="";return n&&Qt(s)?!1:n}function Qt(e){if(!e)return!1;let r=e.previousElementSibling;for(;r!==null;){if(Ie(r))return!1;r=r.previousElementSibling}return!0}let ee=l.createContext(null);ee.displayName="LabelContext";function De(){let e=l.useContext(ee);if(e===null){let r=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,De),r}return e}function Be(e){var r,s,n;let a=(s=(r=l.useContext(ee))==null?void 0:r.value)!=null?s:void 0;return((n=void 0)!=null?n:0)>0?[a,...e].filter(Boolean).join(" "):a}function Me({inherit:e=!1}={}){let r=Be(),[s,n]=l.useState([]),a=e?[r,...s].filter(Boolean):s;return[a.length>0?a.join(" "):void 0,l.useMemo(()=>function(u){let c=W(i=>(n(d=>[...d,i]),()=>n(d=>{let m=d.slice(),h=m.indexOf(i);return h!==-1&&m.splice(h,1),m}))),o=l.useMemo(()=>({register:c,slot:u.slot,name:u.name,props:u.props,value:u.value}),[c,u.slot,u.name,u.props,u.value]);return S.createElement(ee.Provider,{value:o},u.children)},[n])]}let zt="label";function Zt(e,r){var s;let n=l.useId(),a=De(),u=Le(),c=ie(),{id:o=`headlessui-label-${n}`,htmlFor:i=u??((s=a.props)==null?void 0:s.htmlFor),passive:d=!1,...m}=e,h=Y(r);ae(()=>a.register(o),[o,a.register]);let f=W(j=>{let N=j.currentTarget;if(!(j.target!==j.currentTarget&&yt(j.target))&&(ge(N)&&j.preventDefault(),a.props&&"onClick"in a.props&&typeof a.props.onClick=="function"&&a.props.onClick(j),ge(N))){let v=document.getElementById(N.htmlFor);if(v){let $=v.getAttribute("disabled");if($==="true"||$==="")return;let D=v.getAttribute("aria-disabled");if(D==="true"||D==="")return;(wt(v)&&(v.type==="file"||v.type==="radio"||v.type==="checkbox")||v.role==="radio"||v.role==="checkbox"||v.role==="switch")&&v.click(),v.focus({preventScroll:!0})}}}),p=X({...a.slot,disabled:c||!1}),x={ref:h,...a.props,id:o,htmlFor:i,onClick:f};return d&&("onClick"in x&&(delete x.htmlFor,delete x.onClick),"onClick"in m&&delete m.onClick),J()({ourProps:x,theirProps:m,slot:p,defaultTag:i?zt:"div",name:a.name||"Label"})}let Kt=K(Zt),Ae=Object.assign(Kt,{});function Yt(e,r){return e!==null&&r!==null&&typeof e=="object"&&typeof r=="object"&&"id"in e&&"id"in r?e.id===r.id:e===r}function Xt(e=Yt){return l.useCallback((r,s)=>{if(typeof e=="string"){let n=e;return(r==null?void 0:r[n])===(s==null?void 0:s[n])}return e(r,s)},[e])}var Jt=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(Jt||{});let er={0(e,r){let s=[...e.options,{id:r.id,element:r.element,propsRef:r.propsRef}];return{...e,options:bt(s,n=>n.element.current)}},1(e,r){let s=e.options.slice(),n=e.options.findIndex(a=>a.id===r.id);return n===-1?e:(s.splice(n,1),{...e,options:s})}},oe=l.createContext(null);oe.displayName="RadioGroupDataContext";function le(e){let r=l.useContext(oe);if(r===null){let s=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,le),s}return r}let ce=l.createContext(null);ce.displayName="RadioGroupActionsContext";function de(e){let r=l.useContext(ce);if(r===null){let s=new Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,de),s}return r}function tr(e,r){return vt(r.type,er,e,r)}let rr="div";function sr(e,r){let s=l.useId(),n=ie(),{id:a=`headlessui-radiogroup-${s}`,value:u,form:c,name:o,onChange:i,by:d,disabled:m=n||!1,defaultValue:h,tabIndex:f=0,...p}=e,x=Xt(d),[j,N]=l.useReducer(tr,{options:[]}),v=j.options,[$,D]=Me(),[_,B]=Oe(),k=l.useRef(null),E=Y(k,r),O=Mt(h),[I,U]=Bt(u,i,O),G=l.useMemo(()=>v.find(y=>!y.propsRef.current.disabled),[v]),F=l.useMemo(()=>v.some(y=>x(y.propsRef.current.value,I)),[v,I]),L=W(y=>{var T;if(m||x(y,I))return!1;let w=(T=v.find(A=>x(A.propsRef.current.value,y)))==null?void 0:T.propsRef.current;return w!=null&&w.disabled?!1:(U==null||U(y),!0)}),te=W(y=>{if(!k.current)return;let T=v.filter(w=>w.propsRef.current.disabled===!1).map(w=>w.element.current);switch(y.key){case V.Enter:At(y.currentTarget);break;case V.ArrowLeft:case V.ArrowUp:if(y.preventDefault(),y.stopPropagation(),xe(T,Z.Previous|Z.WrapAround)===he.Success){let w=v.find(A=>re(A.element.current));w&&L(w.propsRef.current.value)}break;case V.ArrowRight:case V.ArrowDown:if(y.preventDefault(),y.stopPropagation(),xe(T,Z.Next|Z.WrapAround)===he.Success){let w=v.find(A=>re(A.element.current));w&&L(w.propsRef.current.value)}break;case V.Space:{y.preventDefault(),y.stopPropagation();let w=v.find(A=>re(A.element.current));w&&L(w.propsRef.current.value)}break}}),H=W(y=>(N({type:0,...y}),()=>N({type:1,id:y.id}))),g=l.useMemo(()=>({value:I,firstOption:G,containsCheckedOption:F,disabled:m,compare:x,tabIndex:f,...j}),[I,G,F,m,x,f,j]),b=l.useMemo(()=>({registerOption:H,change:L}),[H,L]),C={ref:E,id:a,role:"radiogroup","aria-labelledby":$,"aria-describedby":_,onKeyDown:te},P=X({value:I}),R=l.useCallback(()=>{if(O!==void 0)return L(O)},[L,O]),q=J();return S.createElement(B,{name:"RadioGroup.Description"},S.createElement(D,{name:"RadioGroup.Label"},S.createElement(ce.Provider,{value:b},S.createElement(oe.Provider,{value:g},o!=null&&S.createElement(Wt,{disabled:m,data:{[o]:I||"on"},overrides:{type:"radio",checked:I!=null},form:c,onReset:R}),q({ourProps:C,theirProps:p,slot:P,defaultTag:rr,name:"RadioGroup"})))))}let nr="div";function ar(e,r){var s;let n=le("RadioGroup.Option"),a=de("RadioGroup.Option"),u=l.useId(),{id:c=`headlessui-radiogroup-option-${u}`,value:o,disabled:i=n.disabled||!1,autoFocus:d=!1,...m}=e,h=l.useRef(null),f=Y(h,r),[p,x]=Me(),[j,N]=Oe(),v=Se({value:o,disabled:i});ae(()=>a.registerOption({id:c,element:h,propsRef:v}),[c,a,h,v]);let $=W(F=>{var L;if(Te(F.currentTarget))return F.preventDefault();a.change(o)&&((L=h.current)==null||L.focus())}),D=((s=n.firstOption)==null?void 0:s.id)===c,{isFocusVisible:_,focusProps:B}=we({autoFocus:d}),{isHovered:k,hoverProps:E}=Ne({isDisabled:i}),O=n.compare(n.value,o),I=ke({ref:f,id:c,role:"radio","aria-checked":O?"true":"false","aria-labelledby":p,"aria-describedby":j,"aria-disabled":i?!0:void 0,tabIndex:i?-1:O||!n.containsCheckedOption&&D?n.tabIndex:-1,onClick:i?void 0:$,autoFocus:d},B,E),U=X({checked:O,disabled:i,active:_,hover:k,focus:_,autofocus:d}),G=J();return S.createElement(N,{name:"RadioGroup.Description"},S.createElement(x,{name:"RadioGroup.Label"},G({ourProps:I,theirProps:m,slot:U,defaultTag:nr,name:"RadioGroup.Option"})))}let ir="span";function or(e,r){var s;let n=le("Radio"),a=de("Radio"),u=l.useId(),c=Le(),o=ie(),{id:i=c||`headlessui-radio-${u}`,value:d,disabled:m=n.disabled||o||!1,autoFocus:h=!1,...f}=e,p=l.useRef(null),x=Y(p,r),j=Be(),N=Pt(),v=Se({value:d,disabled:m});ae(()=>a.registerOption({id:i,element:p,propsRef:v}),[i,a,p,v]);let $=W(G=>{var F;if(Te(G.currentTarget))return G.preventDefault();a.change(d)&&((F=p.current)==null||F.focus())}),{isFocusVisible:D,focusProps:_}=we({autoFocus:h}),{isHovered:B,hoverProps:k}=Ne({isDisabled:m}),E=((s=n.firstOption)==null?void 0:s.id)===i,O=n.compare(n.value,d),I=ke({ref:x,id:i,role:"radio","aria-checked":O?"true":"false","aria-labelledby":j,"aria-describedby":N,"aria-disabled":m?!0:void 0,tabIndex:m?-1:O||!n.containsCheckedOption&&E?n.tabIndex:-1,autoFocus:h,onClick:m?void 0:$},_,k),U=X({checked:O,disabled:m,hover:B,focus:D,autofocus:h});return J()({ourProps:I,theirProps:f,slot:U,defaultTag:ir,name:"Radio"})}let lr=K(sr),cr=K(ar),Ge=K(or),dr=Ae,ur=Nt,mr=Object.assign(lr,{Option:cr,Radio:Ge,Label:dr,Description:ur});function pr({title:e,titleId:r,...s},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},s),e?l.createElement("title",{id:r},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const fr=l.forwardRef(pr);function xr({title:e,titleId:r,...s},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},s),e?l.createElement("title",{id:r},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const hr=l.forwardRef(xr),gr=_t({productId:se().min(1,"Product ID is required"),options:Et(se(),se().optional()).default({}),quantity:Je().int().min(1,"Quantity must be at least 1")});l.memo(({galleryImages:e})=>t.jsx(t.Fragment,{children:e.map((r,s)=>t.jsx(Pe,{className:"relative mb-0 mr-0 inline-block h-16 w-16 flex-none snap-start whitespace-nowrap rounded-lg overflow-hidden bg-white text-sm font-medium uppercase text-gray-900 last:mb-0 hover:bg-gray-50 focus:outline-none focus:ring-0 transition-all duration-200 lg:mb-3 lg:h-20 lg:w-20",children:({selected:n})=>t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"sr-only",children:r.name}),t.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-lg",children:t.jsx(je,{src:r.url,alt:r.alt||"tab for image gallery",className:"h-full w-full object-cover object-center transition-transform duration-200 hover:scale-105"},r.id)}),t.jsx("span",{className:Q("pointer-events-none absolute inset-0 rounded-lg border-2 transition-all duration-200",{"border-blue-500 shadow-lg":n,"border-gray-200":!n}),"aria-hidden":"true"}),n&&t.jsx("span",{className:"absolute inset-0 rounded-lg bg-blue-500/10","aria-hidden":"true"})]})},r.id))}));const vr=({product:e,indexGallery:r})=>{const{images:s=[],thumbnail:n}=e,a=s??[],[u,c]=l.useState(-1),[o,i]=l.useState(r||0),{scrollableDivRef:d}=at({buffer:50,resetOnDepChange:[e]}),m=(a==null?void 0:a.length)<1&&n?[{id:"thumbnail",name:`Thumbnail for ${e.title}`,url:n,alt:e.description||e.title}]:a,h=p=>{p.preventDefault(),i(x=>(x+1)%m.length)},f=p=>{p.preventDefault(),i(x=>(x-1+m.length)%m.length)};return l.useEffect(()=>{i(r||0)},[r]),t.jsxs(mt,{as:"div",className:"flex flex-col gap-4 lg:flex-row lg:gap-6",selectedIndex:o,onChange:i,children:[t.jsx("h2",{className:"sr-only",children:"Images"}),m.length>1&&t.jsxs("div",{className:"absolute -bottom-8 flex justify-center w-full gap-4",children:[t.jsx(pt,{ref:d,className:"flex flex-row gap-2 p-3 bg-[#D1D1D1] rounded-full",children:m.map((p,x)=>t.jsx(Pe,{className:"relative flex w-2 h-2 items-center justify-center cursor-pointer rounded-lg transition-all duration-200 focus:outline-none aria-selected:border-blue-500",children:({selected:j})=>t.jsx(t.Fragment,{children:t.jsx("span",{className:Q("absolute h-2 w-2 rounded-full transition-colors duration-300 bg-white",{"opacity-40":!j})})})},p.id))}),t.jsxs("div",{className:"flex justify-between gap-2",children:[t.jsx("button",{onClick:f,className:"w-8 h-8 py-1 bg-[#D1D1D1] rounded-full flex items-center justify-center focus:outline-none focus:ring-0 hover:bg-gray-300",children:t.jsx(fr,{className:"h-5 w-5 text-white"})}),t.jsx("button",{onClick:h,className:"w-8 h-8 py-1 bg-[#D1D1D1] rounded-full flex items-center justify-center focus:outline-none focus:ring-0 hover:bg-gray-300",children:t.jsx(hr,{className:"h-5 w-5 text-white"})})]})]}),t.jsx(ft,{className:"flex-1",children:t.jsx("div",{className:"relative aspect-square rounded-2xl overflow-hidden",children:m.length>0?m.map((p,x)=>t.jsxs(xt,{className:"group relative h-full w-full overflow-hidden cursor-pointer",onClick:()=>c(x),children:[t.jsx(it,{...ot(e.subtitle),zoom:.75,classNameWrapper:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 !h-auto"}),t.jsx(je,{style:{viewTransitionName:"product-thumbnail"},src:p.url,alt:p.alt||"selected image for product",className:"h-full w-full object-contain object-center transition-transform duration-300 group-hover:scale-105 -rotate-[14deg]"},p.id),t.jsx("div",{className:"absolute right-4 top-4 flex items-center justify-center rounded-xl bg-white/90 backdrop-blur-sm p-2.5 opacity-0 transition-all duration-300 shadow-lg group-hover:opacity-100 hover:scale-110",children:t.jsx(tt,{className:"h-5 w-5 text-gray-700"})})]},p.id)):t.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 rounded-2xl",children:t.jsx("span",{className:"text-gray-400",children:"No Image"})})})}),t.jsx(ye,{images:m.map(p=>({src:p.url,alt:p.alt||"Product image"})),lightBoxIndex:u,setLightBoxIndex:c})]})},br=({option:e,onChange:r,value:s,currencyCode:n})=>{const a=(o,i)=>{r&&r(o,i)},c=[...e.values.filter((o,i,d)=>d.findIndex(m=>m.value===o.value)===i)].sort((o,i)=>{const d=o.minPrice||o.exactPrice||0,m=i.minPrice||i.exactPrice||0;return d-m});return t.jsx(mr,{name:`options.${e.id}`,value:s,onChange:o=>a(e.id,o),children:t.jsx("div",{className:"flex gap-2",children:c.map((o,i)=>(o.minPrice!==void 0&&o.maxPrice!==void 0?o.minPrice===o.maxPrice?M(o.minPrice,{currency:n}):`${M(o.minPrice,{currency:n})}${M(o.maxPrice,{currency:n})}`:o.exactPrice!==void 0&&(M(o.exactPrice,{currency:n}),o.discountPercentage&&`${o.discountPercentage}`),t.jsx(Ge,{value:o.value,disabled:o.disabled,className:({checked:d,disabled:m})=>Q("group",d?"ring-highlight ring-1 bg-highlight":"bg-white border-black","active:ring-highlight relative col-span-1 flex h-full  flex-col justify-between rounded-full border px-12 py-1 font-bold shadow-sm hover:bg-highlight/40 focus:outline-none",m?"opacity-50":""),children:({checked:d})=>t.jsx(Ae,{as:"div",className:"flex items-center w-full",children:t.jsxs("div",{className:"flex-grow",children:[t.jsx("span",{className:Q("text-base",d?"text-primary-800":"text-gray-900"),children:o.value}),o.disabled&&t.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(not available)"})]})})},i)))})})},jr=({option:e,onChange:r,value:s,currencyCode:n})=>{const{register:a}=Ke(),o=[...e.values.filter((i,d,m)=>m.findIndex(h=>h.value===i.value)===d)].sort((i,d)=>{const m=i.minPrice??i.exactPrice??0,h=d.minPrice??d.exactPrice??0;return m-h}).map(i=>{let d=i.value;return i.minPrice!==void 0&&i.maxPrice!==void 0?i.minPrice===i.maxPrice?d+=` - ${M(i.minPrice,{currency:n})}`:d+=` - ${M(i.minPrice,{currency:n})} – ${M(i.maxPrice,{currency:n})}`:i.exactPrice!==void 0&&(d+=` - ${M(i.exactPrice,{currency:n})}`,i.discountPercentage&&(d+=` (${i.discountPercentage}% off)`)),{value:i.value,label:d}});return t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("label",{htmlFor:e.id,className:"text-sm font-medium text-gray-700",children:e.title}),t.jsx("select",{...a(`options.${e.id}`),id:e.id,className:"form-select",defaultValue:s,children:o.map((i,d)=>t.jsx("option",{value:i.value,children:i.label||i.value},d))})]})},yr=({product:e,currencyCode:r})=>{const s=l.useMemo(()=>Ct(e),[e,r]),n=s[0],a=s[s.length-1],u=l.useMemo(()=>z(n),[s]),c=l.useMemo(()=>z(a),[s]),o=u!==c;return t.jsx(t.Fragment,{children:o?t.jsxs(t.Fragment,{children:[M(u,{currency:r}),c&&c>u?t.jsxs(t.Fragment,{children:["–",M(c,{currency:r})]}):""]}):t.jsx(lt,{variant:n,currencyCode:r})})},wr=({productReviews:e})=>{const[r,s]=l.useState(-1),[n,a]=l.useState([]),u=(c,o)=>{a(c),s(o)};return t.jsxs("div",{children:[e&&e.length>0&&t.jsx("div",{className:"",children:e.map((c,o)=>{const i=(c.images||[]).map(d=>({url:d.url,alt:"Customer's review image",name:"Customer's review image"}));return t.jsxs("div",{className:"py-8",children:[t.jsxs("div",{className:" flex items-center justify-between",children:[t.jsx("div",{children:t.jsxs("svg",{width:"54",height:"53",viewBox:"0 0 54 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("circle",{cx:"27.5",cy:"21.5",r:"11.5",fill:"#FFE977"}),t.jsx("path",{d:"M34 39.6667C34 41.8758 29.8932 45 27.5 45C25.1068 45 21 41.8758 21 39.6667C21 37.4575 25.1068 37 27.5 37C29.8932 37 34 37.4575 34 39.6667Z",fill:"#FFE977"}),t.jsx("path",{d:"M27 0.706055C41.5344 0.706055 53.2939 12.2666 53.2939 26.5C53.2939 40.7334 41.5344 52.2939 27 52.2939C12.4656 52.2939 0.706055 40.7334 0.706055 26.5C0.706055 12.2666 12.4656 0.706055 27 0.706055Z",stroke:"black","stroke-width":"1.41144"})]})}),t.jsx("h3",{className:"px-1.5 text-sm font-bold text-[32px] leading-[42px] tracking-normal uppercase line-clamp-1 text-center",children:c.name??"Anonymous"}),t.jsx("div",{className:"mt-1 flex items-center pb-1",children:t.jsx(rt,{value:c.rating??0,readOnly:!0})}),t.jsxs("p",{className:"sr-only",children:[c.rating," out of 5 stars"]})]}),t.jsx("div",{className:"mt-4 space-y-6 text-base italic text-gray-600",dangerouslySetInnerHTML:{__html:c.content}}),i.length>0&&t.jsx(st,{galleryImages:i,onClick:d=>u(i,d)}),c.response&&c.response.content&&t.jsxs("div",{className:"mt-4 rounded-md bg-gray-50 p-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Barrio's Response"}),c.response.created_at&&t.jsx("time",{className:"ml-2 text-xs italic text-gray-500",dateTime:String(c.response.created_at),children:nt(new Date(c.response.created_at))})]}),t.jsx("div",{className:"mt-2 text-sm text-gray-700",dangerouslySetInnerHTML:{__html:c.response.content}})]})]},c.id)})}),t.jsx(ye,{images:n.map(({url:c,...o})=>({...o,src:c})),lightBoxIndex:r,setLightBoxIndex:s})]})},Nr=({context:e,paginationConfig:r,className:s,...n})=>t.jsx(t.Fragment,{children:t.jsxs("div",{className:s,children:[t.jsx(wr,{...n}),r&&t.jsx(kt,{context:e,paginationConfig:r,section:"reviews"})]})}),Pr=()=>{const e=We("routes/products.$productHandle");if(!e)return null;const{product:r,productReviews:s,productReviewStats:n}=e;return!s.count||n.count<1?null:t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"text-center",children:[t.jsx("span",{className:"text-5xl font-title font-extrabold text-64px leading-48px uppercase",children:"Customer"}),t.jsx("span",{className:"text-6xl font-centuryBook italic text-64px leading-48px pl-2",children:"Review"})]}),t.jsx("section",{id:"reviews",className:"container mx-auto my-12 grid grid-cols-12 px-8",children:t.jsx(Nr,{className:"col-span-12",productReviews:s.product_reviews,context:`products/${r.handle}`,paginationConfig:{limit:s.limit,offset:s.offset,count:s.count}})})]})},qe=(e,r)=>{if(!r)return;const s=r.join("|");return e[s]},Cr=e=>{if(!e)return;const{original:r,calculated:s}=St(e);if(!r||!s||s>=r)return;const n=r-s,a=n/r*100;return{valueOff:n,percentageOff:a}},Ue=e=>{var a;if(!e.length)return[[]];const[r,...s]=e,n=Ue(s);return((a=r.values)==null?void 0:a.reduce((u,c)=>{const o=c.value,i=n.map(d=>[o,...d]);return[...u,...i]},[]))||[]},Rr=e=>{const r=e.options||[],s=e.variants||[],n={};return Ue(r).forEach(u=>{const c=u.join("|"),o=s.find(i=>{var d;return(d=i.options)==null?void 0:d.every(m=>u.includes(m.value))});o&&(n[c]=o)}),n};function ve(e,r,s){var m,h;const n=e.options||[],a=n.findIndex(f=>f.id===s);if(a===0){const f=n.find(p=>p.id===s);return(f==null?void 0:f.values)||[]}const u=n.slice(0,a).map(f=>f.id).filter(Boolean),c=Object.entries(r).filter(([f,p])=>u.includes(f)&&p!=="");if(c.length===0){const f=n.find(p=>p.id===s);return(f==null?void 0:f.values)||[]}const o=(m=e.variants)==null?void 0:m.filter(f=>c.every(([p,x])=>{var N;const j=(N=f.options)==null?void 0:N.find(v=>v.option_id===p);return j?j.value===x:!0})),i=new Set;o==null||o.forEach(f=>{var x,j;const p=(j=(x=f.options)==null?void 0:x.find(N=>N.option_id===s))==null?void 0:j.value;p&&i.add(p)});const d=n.find(f=>f.id===s);return((h=d==null?void 0:d.values)==null?void 0:h.filter(f=>i.has(f.value)))||[]}const be=(e,r,s,n,a)=>{var o;const u=a&&e===a.length-1,c=(o=s[0])==null?void 0:o.option_id;return s.map(i=>{if(!u){const h=Object.values(n).filter(f=>{var p;return(p=f.options)==null?void 0:p.some(x=>x.option_id===c&&x.value===i.value)});if(h.length>0){const f=h.map(x=>z(x)),p=[...new Set(f)].sort((x,j)=>x-j);if(p.length>1){const x=p[0],j=p[p.length-1];return{...i,minPrice:x,maxPrice:j}}else return{...i,minPrice:p[0],maxPrice:p[0]}}}const d=a==null?void 0:a.map((h,f)=>f===e?i.value:h),m=qe(n,d);if(m){const h=z(m),f=Cr(m);return{...i,exactPrice:h,discountPercentage:f!=null&&f.percentageOff?Math.round(f.percentageOff):void 0}}return{...i}})},Sr=({data:e,matches:r})=>{var f,p,x;const n=(f=r[0].data)==null?void 0:f.region,a=e.product,u=Rt(a);if(!a)return[];const c=a.title,o=a.description,i=c,d=o,m=a.thumbnail||((x=(p=a.images)==null?void 0:p[0])==null?void 0:x.url),h=m?`${c} product thumbnail`:void 0;return[{title:c},{name:"description",content:o},{property:"og:title",content:i},{property:"og:description",content:d},{property:"og:image",content:m},{property:"og:image:alt",content:h},{property:"og:type",content:"product"},{property:"product:price:currency",content:n.currency_code},{property:"product:price:amount",content:M(z(u),{currency:n.currency_code})}]},kr=Lt(Dt,Tt,Sr),ne=({title:e,children:r,initiallyOpen:s=!1,className:n=""})=>{const[a,u]=l.useState(s),c=()=>{u(o=>!o)};return t.jsxs("div",{className:Q("collasape-component",n,{"bg-[radial-gradient(36.36%_53.14%_at_5.59%_100%,rgba(255,233,119,0.5)_0%,rgba(255,255,255,0.5)_100%)]":a}),children:[t.jsxs("button",{type:"button",className:"collasape-header text-[24px] leading-[32px] tracking-normal uppercase flex items-center justify-between w-full text-left p-2 cursor-pointer bg-none border-none outline-none font-bold text-sm transition-all duration-300","aria-expanded":a,onClick:c,children:[e,a?t.jsxs("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{filter:"url(#filter0_d_276_82)",children:[t.jsx("circle",{cx:"21",cy:"17",r:"13",transform:"rotate(-90 21 17)",fill:"#FFE977"}),t.jsx("path",{d:"M21.7071 12.2929C21.3166 11.9024 20.6834 11.9024 20.2929 12.2929L13.9289 18.6569C13.5384 19.0474 13.5384 19.6805 13.9289 20.0711C14.3195 20.4616 14.9526 20.4616 15.3431 20.0711L21 14.4142L26.6569 20.0711C27.0474 20.4616 27.6805 20.4616 28.0711 20.0711C28.4616 19.6805 28.4616 19.0474 28.0711 18.6569L21.7071 12.2929ZM21 14L22 14L22 13L21 13L20 13L20 14L21 14Z",fill:"black"})]}),t.jsx("defs",{children:t.jsxs("filter",{id:"filter0_d_276_82",x:"0",y:"0",width:"42",height:"42",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[t.jsx("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),t.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),t.jsx("feOffset",{dy:"4"}),t.jsx("feGaussianBlur",{stdDeviation:"4"}),t.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),t.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.57005 0 0 0 0 0.509485 0 0 0 0 0.191522 0 0 0 1 0"}),t.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_82"}),t.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_276_82",result:"shape"})]})})]}):t.jsxs("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsxs("g",{filter:"url(#filter0_d_276_73)",children:[t.jsx("circle",{cx:"21",cy:"17",r:"13",transform:"rotate(90 21 17)",fill:"black"}),t.jsx("path",{d:"M20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071L28.0711 15.3431C28.4616 14.9526 28.4616 14.3195 28.0711 13.9289C27.6805 13.5384 27.0474 13.5384 26.6569 13.9289L21 19.5858L15.3431 13.9289C14.9526 13.5384 14.3195 13.5384 13.9289 13.9289C13.5384 14.3195 13.5384 14.9526 13.9289 15.3431L20.2929 21.7071ZM21 20L20 20L20 21L21 21L22 21L22 20L21 20Z",fill:"white"})]}),t.jsx("defs",{children:t.jsxs("filter",{id:"filter0_d_276_73",x:"0",y:"0",width:"42",height:"42",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[t.jsx("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),t.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),t.jsx("feOffset",{dy:"4"}),t.jsx("feGaussianBlur",{stdDeviation:"4"}),t.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),t.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.57005 0 0 0 0 0.509485 0 0 0 0 0.191522 0 0 0 1 0"}),t.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_73"}),t.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_276_73",result:"shape"})]})})]})]}),t.jsx("div",{className:"collasape-content",style:{maxHeight:a?"1000px":"0px",overflow:"hidden",transition:"max-height 0.3s ease",padding:a?"1rem":"0 1rem"},"aria-hidden":!a,children:a&&r})]})},Ir=e=>!!(e!=null&&e.manage_inventory&&(e==null?void 0:e.inventory_quantity)<1),Or=({product:e,reviewsCount:r,reviewStats:s})=>{var H;const[n,a]=l.useState(0),u=l.useRef(null),c=Ve({key:$t.cart.createLineItem}),{toggleCartDrawer:o}=It(),{region:i}=Ot(),d=Object.keys(((H=c.data)==null?void 0:H.errors)||{}).length>0,m=["submitting","loading"].includes(c.state),h={productId:e.id,quantity:"1",options:l.useMemo(()=>{var b,C;const g=(b=e.variants)==null?void 0:b[0];return g&&g.options?g.options.reduce((P,R)=>(R.option_id&&R.value&&(P[R.option_id]=R.value),P),{}):((C=e.options)==null?void 0:C.reduce((P,R)=>{var q;return!R.id||!((q=R.values)!=null&&q.length)||(P[R.id]=R.values[0].value),P},{}))||{}},[e])},f=Ye({resolver:Ft(gr),defaultValues:h,fetcher:c,submitConfig:{method:"post",action:"/api/cart/line-items/create",encType:"multipart/form-data"}}),p=i.currency_code,[x,j]=l.useState(h.options),[N,v]=l.useState(!1),[$,D]=l.useState([]),_=l.useMemo(()=>{var g;return(g=e.options)==null?void 0:g.map(({id:b})=>x[b])},[e,x]),B=l.useMemo(()=>Rr(e),[e]),k=l.useMemo(()=>qe(B,_),[B,_]),E=l.useMemo(()=>{var g;return(g=e.options)==null?void 0:g.map((b,C)=>{var y;if(C===0){const T=be(C,p,b.values||[],B,_);return{title:b.title,product_id:b.product_id,id:b.id,values:T}}const P=ve(e,x,b.id),R=(y=b.values)==null?void 0:y.filter(T=>P.some(w=>w.value===T.value)),q=be(C,p,R||[],B,_);return{title:b.title,product_id:b.product_id,id:b.id,values:q}})},[e,x,p,B,_]),O=ct(e).averageInventory===0,I=(g,b,C)=>{var T;const P={...g};P[b]=C;const R=((T=e.options)==null?void 0:T.map(w=>w.id))||[],q=R.indexOf(b),y=q>=0?R.slice(q+1):[];return y.length>0&&y.forEach(w=>{if(!w)return;const A=ve(e,P,w);A.length>0?P[w]=A[0].value:P[w]=""}),P},U=g=>{const b=g.target.name.replace("options.",""),C=g.target.value,P=I(x,b,C);j(P),f.setValue("options",P)};l.useEffect(()=>{if(k){console.log("selectedVariant",k);const g=k.title==="small"?1:0;a(g)}},[k]);const G=(g,b)=>{const C=I(x,g,b);j(C),f.setValue("options",C)};l.useEffect(()=>{if(!m&&!d&&u.current){u.current.reset();const g=u.current.querySelector('input[name="quantity"]');g&&(g.value="1");const b=u.current.querySelector('input[name="productId"]');b&&(b.value=e.id)}},[m,d,e.id]),l.useEffect(()=>{Object.keys(x).length===0&&j(h.options)},[h.options,x]),l.useEffect(()=>{j(h.options)},[h.options]);const F=Ir(k)||O,L=l.useCallback(()=>{o(!0)},[o]),te=l.useCallback(async()=>{if(N)return;v(!0);const g=new FormData;g.append("productId",e.id),g.append("quantity",f.getValues("quantity"));const b=f.getValues("options");Object.entries(b).forEach(([C,P])=>{g.append(`options.${C}`,P)});try{(await fetch("/api/cart/line-items/create",{method:"POST",body:g})).ok?window.location.href="/checkout":(console.error("Failed to add item to cart"),v(!1))}catch(C){console.error("Error adding item to cart:",C),v(!1)}},[e.id,f,N]);return l.useEffect(()=>{const g=dt(e.title);g.length>1?D(g):D([e.title])},[e.title]),t.jsxs(t.Fragment,{children:[t.jsx("section",{className:"pb-12 pt-12 min-h-screen",children:t.jsx(Xe,{...f,children:t.jsxs(c.Form,{id:"addToCartForm",ref:u,method:"post",action:"/api/cart/line-items/create",onSubmit:L,children:[t.jsx("input",{type:"hidden",name:"productId",value:e.id}),t.jsx(me,{className:"px-0 sm:px-6 md:px-8",children:t.jsxs(Ze,{className:"!gap-0 overflow-visible",children:[t.jsxs(pe,{className:"mb-8 md:col-span-6 sticky top-[144px] [height:min-content]",children:[t.jsx("h2",{className:"xl:text-[100px] font-bold text-gray-900 leading-[5rem]",children:$[0]}),t.jsx(vr,{product:e,indexGallery:n},e.id),t.jsxs("div",{className:"flex gap-4 items-end justify-between",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[$[1]&&t.jsx("h2",{className:"xl:text-[100px] font-bold text-gray-900",children:$[1]}),t.jsx("p",{className:"text-gray-900 font-bold flex gap-3",children:t.jsx("span",{className:"text-5xl",children:k?t.jsx(ut,{product:e,variant:k,currencyCode:p}):t.jsx(yr,{product:e,currencyCode:p})})})]}),t.jsxs("div",{className:"flex flex-col items-end gap-6",children:[!F&&t.jsx(et,{variant:k}),t.jsx("div",{className:"flex-1",children:F?t.jsx(fe,{disabled:!0,className:"pointer-events-none !h-12 w-full !text-base !font-bold opacity-50",children:"Sold out"}):t.jsx(fe,{variant:"ghost",size:"image",disabled:m||N,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx("img",{src:"/assets/images/add-to-cart.svg",alt:"Add to cart",className:"w-auto h-[108px]"})})})]})]})]}),t.jsx(pe,{className:"flex flex-col md:col-span-6",children:t.jsxs("div",{className:"h-fit",children:[t.jsxs("div",{className:"px-0 sm:px-6 md:p-10 md:pt-0",children:[t.jsx("div",{className:"flex items-center gap-4 py-2",children:t.jsx("div",{className:"flex-1",children:F?t.jsx(ue,{disabled:!0,className:"pointer-events-none !h-12 !text-base !font-bold opacity-50 bg-gray-300 text-gray-500",children:"Sold out"}):t.jsx(ue,{variant:"primary",onClick:te,disabled:m||N,className:"!h-12 whitespace-nowrap !text-base !font-bold transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Processing...":"Buy Now"})})}),E&&E.length>5&&t.jsxs("section",{"aria-labelledby":"product-options",className:"product-options",children:[t.jsx("h2",{id:"product-options",className:"sr-only",children:"Product options"}),t.jsx("div",{className:"space-y-4",children:E.map((g,b)=>t.jsx(jr,{option:g,value:x[g.id],onChange:U,currencyCode:p},b))})]}),E&&E.length<=5&&t.jsxs("section",{"aria-labelledby":"product-options",className:"product-options my-6 grid gap-4",children:[t.jsx("h2",{id:"product-options",className:"sr-only",children:"Product options"}),E.map((g,b)=>t.jsx("div",{children:t.jsx(br,{option:g,value:x[g.id],onChange:G,currencyCode:p})},b))]}),t.jsx("div",{className:"my-2 flex flex-col gap-2",children:!!e.description&&t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:"whitespace-pre-wrap text-base text-primary-800",children:e.description})})})]}),t.jsx("div",{className:"container mx-auto grid grid-cols-12 px-8 gap-[20px]",children:t.jsx("hr",{className:"col-span-8 border-t-[1px] border-primary"})}),t.jsxs("div",{className:"container mx-auto my-12 grid grid-cols-12 px-8 p-4 gap-[20px]",children:[t.jsx(ne,{className:"col-span-12 p-4 rounded-[32px] shadow-[0px_4px_6px_0px_#00000040]",title:"INGREDIENTS",initiallyOpen:!1,children:t.jsx("div",{children:t.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quos."})})}),t.jsx(ne,{className:"col-span-12 p-4 rounded-[32px] shadow-[0px_4px_6px_0px_#00000040]",title:"PRECAUTIONS OF USE",initiallyOpen:!1,children:t.jsx("div",{children:t.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quos. Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quos."})})}),t.jsx(ne,{className:"col-span-12 p-4 rounded-[32px] shadow-[0px_4px_6px_0px_#00000040]",title:"APPLICATION TIPS",initiallyOpen:!1,children:t.jsx("div",{children:t.jsx("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quos. Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quos. Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quos."})})})]}),t.jsx("div",{className:"container mx-auto grid grid-cols-12 px-8 gap-[20px]",children:t.jsx("hr",{className:"col-span-8 border-t-[1px] border-primary"})})]})})]})})]})})}),t.jsx(me,{children:r>0&&t.jsx(Pr,{})})]})},as=kr,is=He(function(){const{product:r,productReviews:s,productReviewStats:n}=Qe();return t.jsxs(t.Fragment,{children:[t.jsx(Or,{product:r,reviewsCount:s.count,reviewStats:n.product_review_stats[0]}),t.jsx(ze,{className:"!pb-[100px] xl:px-9",heading:"You may also like"})]})});export{is as default,as as meta};
