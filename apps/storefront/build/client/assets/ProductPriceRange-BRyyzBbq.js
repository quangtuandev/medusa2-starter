import{r as f,R as F,j as h}from"./chunk-OIYGIGL5-DA7B83DT.js";import{Y as N,o as S,y as D,n as T,a as I,K as L}from"./use-is-mounted-CV1LEgbp.js";import{g as _,f as E,b as P,c as $,s as w}from"./PlusIcon-B0nCS5Pn.js";import{m as O,g as R,a as B}from"./meta-DdeOJusI.js";import{P as A}from"./ProductThumbnail-CVgyLw0M.js";let W=f.createContext(void 0);function k(){return f.useContext(W)}function z(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function b(t){return z(t)&&"tagName"in t}function x(t){return b(t)&&"accessKey"in t}function et(t){return b(t)&&"tabIndex"in t}function nt(t){return b(t)&&"style"in t}function rt(t){return x(t)&&t.nodeName==="IFRAME"}function ot(t){return x(t)&&t.nodeName==="INPUT"}function it(t){return x(t)&&t.nodeName==="LABEL"}function st(t){return x(t)&&t.nodeName==="FIELDSET"}function at(t){return x(t)&&t.nodeName==="LEGEND"}function ct(t){return b(t)?t.matches('a[href],audio[controls],button,details,embed,iframe,img[usemap],input:not([type="hidden"]),label,select,textarea,video[controls]'):!1}let M=f.createContext(null);M.displayName="DescriptionContext";function j(){let t=f.useContext(M);if(t===null){let r=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,j),r}return t}function ut(){var t,r;return(r=(t=f.useContext(M))==null?void 0:t.value)!=null?r:void 0}function lt(){let[t,r]=f.useState([]);return[t.length>0?t.join(" "):void 0,f.useMemo(()=>function(e){let i=S(l=>(r(s=>[...s,l]),()=>r(s=>{let c=s.slice(),u=c.indexOf(l);return u!==-1&&c.splice(u,1),c}))),o=f.useMemo(()=>({register:i,slot:e.slot,name:e.name,props:e.props,value:e.value}),[i,e.slot,e.name,e.props,e.value]);return F.createElement(M.Provider,{value:o},e.children)},[r])]}let K="p";function Y(t,r){let e=f.useId(),i=k(),{id:o=`headlessui-description-${e}`,...l}=t,s=j(),c=D(r);T(()=>s.register(o),[o,s.register]);let u=I({...s.slot,disabled:i||!1}),d={ref:c,...s.props,id:o};return L()({ourProps:d,theirProps:l,slot:u,defaultTag:K,name:s.name||"Description"})}let q=N(Y),pt=Object.assign(q,{});const G=(t,r)=>{if(!r)return;const e=r.join("|");return t[e]},H=t=>{if(!t)return;const{original:r,calculated:e}=$(t);if(!r||!e||e>=r)return;const i=r-e,o=i/r*100;return{valueOff:i,percentageOff:o}},C=t=>{var o;if(!t.length)return[[]];const[r,...e]=t,i=C(e);return((o=r.values)==null?void 0:o.reduce((l,s)=>{const c=s.value,u=i.map(d=>[c,...d]);return[...l,...u]},[]))||[]},dt=t=>{const r=t.options||[],e=t.variants||[],i={};return C(r).forEach(l=>{const s=l.join("|"),c=e.find(u=>{var d;return(d=u.options)==null?void 0:d.every(m=>l.includes(m.value))});c&&(i[s]=c)}),i};function ft(t,r,e){var m,g;const i=t.options||[],o=i.findIndex(n=>n.id===e);if(o===0){const n=i.find(a=>a.id===e);return(n==null?void 0:n.values)||[]}const l=i.slice(0,o).map(n=>n.id).filter(Boolean),s=Object.entries(r).filter(([n,a])=>l.includes(n)&&a!=="");if(s.length===0){const n=i.find(a=>a.id===e);return(n==null?void 0:n.values)||[]}const c=(m=t.variants)==null?void 0:m.filter(n=>s.every(([a,p])=>{var y;const v=(y=n.options)==null?void 0:y.find(V=>V.option_id===a);return v?v.value===p:!0})),u=new Set;c==null||c.forEach(n=>{var p,v;const a=(v=(p=n.options)==null?void 0:p.find(y=>y.option_id===e))==null?void 0:v.value;a&&u.add(a)});const d=i.find(n=>n.id===e);return((g=d==null?void 0:d.values)==null?void 0:g.filter(n=>u.has(n.value)))||[]}const mt=(t,r,e,i,o)=>{var c;const l=o&&t===o.length-1,s=(c=e[0])==null?void 0:c.option_id;return e.map(u=>{if(!l){const g=Object.values(i).filter(n=>{var a;return(a=n.options)==null?void 0:a.some(p=>p.option_id===s&&p.value===u.value)});if(g.length>0){const n=g.map(p=>P(p)),a=[...new Set(n)].sort((p,v)=>p-v);if(a.length>1){const p=a[0],v=a[a.length-1];return{...u,minPrice:p,maxPrice:v}}else return{...u,minPrice:a[0],maxPrice:a[0]}}}const d=o==null?void 0:o.map((g,n)=>n===t?u.value:g),m=G(i,d);if(m){const g=P(m),n=H(m);return{...u,exactPrice:g,discountPercentage:n!=null&&n.percentageOff?Math.round(n.percentageOff):void 0}}return{...u}})},U=({data:t,matches:r})=>{var n,a,p;const i=(n=r[0].data)==null?void 0:n.region,o=t.product,l=_(o);if(!o)return[];const s=o.title,c=o.description,u=s,d=c,m=o.thumbnail||((p=(a=o.images)==null?void 0:a[0])==null?void 0:p.url),g=m?`${s} product thumbnail`:void 0;return[{title:s},{name:"description",content:c},{property:"og:title",content:u},{property:"og:description",content:d},{property:"og:image",content:m},{property:"og:image:alt",content:g},{property:"og:type",content:"product"},{property:"product:price:currency",content:i.currency_code},{property:"product:price:amount",content:E(P(l),{currency:i.currency_code})}]},gt=O(B,R,U),vt=({product:t,currencyCode:r})=>{const e=f.useMemo(()=>w(t),[t,r]),i=e[0],o=e[e.length-1],l=f.useMemo(()=>P(i),[e]),s=f.useMemo(()=>P(o),[e]),c=l!==s;return h.jsx(h.Fragment,{children:c?h.jsxs(h.Fragment,{children:[E(l,{currency:r}),s&&s>l?h.jsxs(h.Fragment,{children:["â€“",E(s,{currency:r})]}):""]}):h.jsx(A,{variant:i,currencyCode:r})})};export{at as E,lt as H,ct as L,pt as M,vt as P,st as a,k as b,G as c,ft as d,gt as e,mt as g,et as i,ot as l,it as m,x as n,nt as r,dt as s,b as t,rt as u,ut as w};
