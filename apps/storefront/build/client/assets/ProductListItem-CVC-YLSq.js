import{j as r,g as w,r as v}from"./chunk-OIYGIGL5-O3V7dfML.js";import{c as d}from"./clsx-B-dksMZM.js";import{F as N,g as I,i as C,f as b,a as D,b as P}from"./prices-EERMpwH6.js";import{u as A}from"./useCart-E3-L23VG.js";import{u as B,M as O}from"./MorphingShape-DHGSJy3E.js";import{F as _}from"./PlusIcon-CoE4x5eo.js";import{I as T}from"./Image-DEEEvWqD.js";const Y=({className:t,...e})=>r.jsx("article",{className:d(t,"group"),...e,children:r.jsx("figure",{className:"aspect-w-1 aspect-h-1 h-full w-full overflow-hidden rounded-lg border",children:r.jsx("div",{className:"h-full w-full bg-gray-200 object-cover object-center group-hover:opacity-75"})})}),k=()=>{var s,a;const t=w({key:N.cart.createLineItem});return{addToCart:o=>{const n=new FormData;n.append("productId",o.productId),n.append("quantity",String(o.quantity||1)),o.options&&Object.entries(o.options).forEach(([l,i])=>{n.append(`options.${l}`,i)}),t.submit(n,{method:"post",action:"/api/cart/line-items/create"})},isLoading:t.state==="submitting"||t.state==="loading",error:(s=t.data)==null?void 0:s.errors,cart:(a=t.data)==null?void 0:a.cart,state:t.state}},M=({product:t,selectedOptions:e={},quantity:s=1,disabled:a=!1,className:o,variant:n="primary",size:l="md"})=>{const{t:i}=B(),{addToCart:u,isLoading:y}=k(),{toggleCartDrawer:x}=A(),h=g=>{g.preventDefault(),u({productId:t.id,options:e,quantity:s}),x(!0)},m=a||y,p="font-medium rounded-[100px] transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center p-2",f={primary:{enabled:"bg-black text-white hover:bg-gray-800 focus:ring-gray-500",disabled:"bg-gray-300 text-gray-500 cursor-not-allowed"},secondary:{enabled:"bg-white text-black border border-black hover:bg-gray-50 focus:ring-gray-500",disabled:"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed"}},c=d(p,m?f[n].disabled:f[n].enabled,o);return r.jsxs("button",{onClick:h,disabled:m,className:c,"aria-label":`${i("common.addToCart")} ${t.title}`,children:[r.jsx("i",{className:"w-4",children:r.jsx(_,{className:"size-1"})}),r.jsx("span",{className:"text-nowrap btn-add opacity-0 w-0 h-0 transition-all duration-300 group-hover/product-card:opacity-100 group-hover/product-card:w-auto group-hover/product-card:h-auto",children:" Add to cart"})]})},z=({className:t})=>r.jsx("div",{className:d("inline-flex items-center rounded-md border border-gray-200 bg-gray-200 px-1.5 py-0.5 text-xs font-bold text-gray-600",t),children:"Sold out"}),L=t=>v.useMemo(()=>{var a,o;const e=((a=t.variants)==null?void 0:a.reduce((n,l)=>l.allow_backorder||!l.manage_inventory?1/0:n+(l.inventory_quantity||0),0))??0;return{averageInventory:e/(((o=t==null?void 0:t.variants)==null?void 0:o.length)??1),totalInventory:e}},[t]),R=({product:t,className:e})=>{const a=L(t).averageInventory===0;return r.jsx("div",{className:e,children:a&&r.jsx(z,{})})},q=({variant:t,currencyCode:e})=>{const{original:s,calculated:a}=I(t),o=C(a)&&a<(s??0);return r.jsx(r.Fragment,{children:o?r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsx("span",{children:b(a,{currency:e})}),r.jsx("s",{className:"text-gray-400",children:b(s||0,{currency:e})})]}):b(s||0,{currency:e})})},H=({product:t,currencyCode:e,...s})=>{const a=v.useMemo(()=>s.variant||D(t),[s.variant,t,e]);return a?r.jsx(q,{variant:a,currencyCode:e}):null},S={BLOSSOM:{colorStart:"#FFFFFF",colorEnd:"#6DCB8F",offsetStart:8.85,offsetEnd:79.19},SAFFRON:{colorStart:"#BEB1F8",colorEnd:"#8F5DDB",offsetStart:8.85,offsetEnd:79.19},HAZE:{colorStart:"#BFFAED",colorEnd:"#BBEE7C",offsetStart:8.85,offsetEnd:79.19},RICE:{colorStart:"#EEF7FF",colorEnd:"#A2D4FD",offsetStart:8.85,offsetEnd:79.19},LATTE:{colorStart:"#E4E3D8",colorEnd:"#89E4BB",offsetStart:8.85,offsetEnd:79.19},COFFEE:{colorStart:"#F5DDDD",colorEnd:"#FFB578",offsetStart:8.85,offsetEnd:79.19}},V=(t=null)=>{const e=t?S[t]:Object.values(S),s=Array.isArray(e)?e[Math.floor(Math.random()*e.length)]:e;return{blur:20,zoom:.42,className:"flex justify-center",id:Math.random().toString(36).substring(2,15),...s}},tt=t=>{let e=t.trim();if(e.includes(" ")){const[n,...l]=e.split(/\s+/);return[n,"_"+l.join(" ")]}const s=Math.floor(e.length/2),a=e.slice(0,s),o=e.slice(s);return[a,"_"+o]},Z=({product:t,className:e,isTransitioning:s,...a})=>{const o=t.images&&t.images[0]&&t.images[0].url||t.thumbnail,n=t.images&&t.images[1]&&t.images[1].url;return r.jsxs("figure",{className:d("product-thumbnail","aspect-w-1 aspect-h-1 w-full overflow-hidden",e),style:{viewTransitionName:s?"product-thumbnail":void 0},...a,children:[r.jsx(O,{...V(t.subtitle)}),o?r.jsx(T,{loading:"lazy",src:o,alt:t.title,className:d("h-full w-full object-cover object-center transition-all duration-300 -rotate-[14deg]",{"group-hover/product-card:opacity-75":!n})}):r.jsx("div",{className:"flex h-full w-full items-center justify-center object-cover object-center group-hover/product-card:opacity-75",children:"No Image"})]})},$={SIZE:"Size"},et=({product:t,className:e,isTransitioning:s,...a})=>{var m,p,f;const{region:o}=P(),[n,l]=v.useState(null),i=(m=t.options)==null?void 0:m.find(c=>c.title===$.SIZE),u={};n&&i&&(u[i==null?void 0:i.id]=n);const x=!(i&&i.values&&i.values.length>0)||n,h=(p=t.variants)==null?void 0:p.find(c=>Object.entries(u).every(([g,F])=>{var j;return(j=c.options)==null?void 0:j.some(E=>E.option_id===g&&E.value===F)}));return h?r.jsxs("article",{className:d(e,"group/product-card text-left rounded-[32px] p-4 pb-6 overflow-hidden bg-white shadow-[5px_5px_10px_0px_#00000040]"),...a,children:[r.jsxs("div",{className:"relative",children:[r.jsx(R,{className:"absolute right-2 top-2 z-10 flex gap-2",product:t}),r.jsx(Z,{isTransitioning:s,product:t})]}),r.jsx("h4",{className:"mt-4 overflow-hidden text-ellipsis font-extrabold font-title group-hover/product-card:text-[36px] transition-all duration-300 text-[28px]",children:t.title}),r.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[r.jsx("div",{className:"flex gap-2 justify-center items-center",children:(f=i==null?void 0:i.values)==null?void 0:f.map(c=>r.jsx("span",{className:d("text-sm font-light  border border-[#716E6E] rounded-full px-2 py-1 hover:text-[#716E6E] hover:border-black text-[10px] font-display leading-none",{"!text-black !border-black":n===c.value}),onClick:g=>{l(c.value),g.preventDefault()},children:c.value},c.id))}),r.jsx(M,{product:t,selectedOptions:u,disabled:!x,variant:"primary"})]}),r.jsx("p",{className:"mt-1 text-lg font-extrabold font-title leading-none tracking-normal hover:text-[]",children:r.jsx(H,{product:t,variant:h,currencyCode:o.currency_code})})]}):null};export{Y as E,et as P,q as a,H as b,tt as g,V as r,L as u};
