import{j as s,r as l,N as C,h as S,k as T}from"./chunk-OIYGIGL5-DCgkdKKb.js";import{C as A}from"./Container-CwGEGTs5.js";import{u as F,S as $}from"./useScrollArrows-B2hyYdh2.js";import{c as j}from"./clsx-B-dksMZM.js";import{E as I,P as L}from"./ProductListItem-_AQZUiwL.js";import{B as k}from"./Button-E-8QNY68.js";import{W as B,d as m}from"./tabs-D4HrBTLt.js";const y=(e,r="",t=!1)=>Object.entries(e).filter(([a,n])=>n).map(([a,n])=>typeof n=="object"?y(n,a,Array.isArray(n)):`${r?`${r}[${t?"":a}]`:`${a}`}=${n}`).join("&"),E=({length:e})=>s.jsx("div",{className:"xs:grid-cols-2 grid grid-cols-1 gap-y-10 gap-x-6 md:!grid-cols-3 xl:!grid-cols-4 xl:gap-x-8",children:Array.from({length:e},(r,t)=>s.jsx(I,{},t))}),z=l.memo(({products:e})=>s.jsx(s.Fragment,{children:e.map(r=>s.jsx("div",{className:"xs:w-[31.2%] xs:snap-start mr-6 inline-block w-[100%] snap-center last:mr-0 sm:mr-6 sm:snap-start md:w-[31.2%] xl:mr-8 xl:w-[23%]",children:s.jsx(C,{prefetch:"viewport",to:`/products/${r.handle}`,viewTransition:!0,children:({isTransitioning:t})=>s.jsx(L,{isTransitioning:t,product:r})})},r.id))})),O=({products:e,className:r})=>{const{scrollableDivRef:t,...a}=F({buffer:100,resetOnDepChange:[e]});return e?s.jsxs("div",{className:j("product-carousel relative",r),children:[s.jsx("div",{ref:t,className:"w-full snap-both snap-mandatory overflow-x-auto whitespace-nowrap pb-2 sm:snap-proximity",children:s.jsx(z,{products:e})}),s.jsx($,{className:"-mt-12",...a})]}):s.jsx(E,{length:4})},u=l.forwardRef(({selected:e,className:r,...t},a)=>s.jsx(k,{ref:a,size:"sm",className:j("whitespace-nowrap !rounded-full",{"!bg-white !text-gray-700 shadow-sm":e,"!text-primary-600 hover:!text-primary-800 hover:!bg-primary-100 !border-transparent !bg-transparent":!e},r),...t})),P=({className:e,...r})=>s.jsx(B,{className:j("bg-primary-50 mb-2 inline-flex w-auto max-w-full snap-x gap-0.5 overflow-auto rounded-full px-2 py-1.5",e),...r}),R=({categories:e,...r})=>e!=null&&e.length?s.jsx(m.Group,{...r,children:s.jsxs(P,{children:[s.jsx(m,{as:l.Fragment,children:({selected:t})=>s.jsx(u,{selected:t,children:"All"})}),e.map(t=>s.jsx(m,{as:l.Fragment,children:({selected:a})=>s.jsx(u,{selected:a,children:t.name})},t.id))]})}):null,D=({collections:e,...r})=>e!=null&&e.length?s.jsx(m.Group,{...r,children:s.jsxs(P,{children:[s.jsx(m,{as:l.Fragment,children:({selected:t})=>s.jsx(u,{selected:t,children:"All"})}),e.map(t=>s.jsx(m,{as:l.Fragment,children:({selected:a})=>s.jsx(u,{selected:a,children:t.title})},t.id))]})}):null,G=()=>{const[e,r]=l.useState(!1),[t,a]=l.useState(void 0),n=S(),b=T(),{collection_tabs:i,category_tabs:c,products:x}=n.data||{},h=b.productHandle?x==null?void 0:x.filter(o=>o.handle!==b.productHandle):x,f=!!(i!=null&&i.length),w=!!(c!=null&&c.length),N=e&&!(h!=null&&h.length),g=o=>{const p=y({subloader:"productList",data:JSON.stringify({content:o})});n.load(`/api/page-data?${p}`)};l.useEffect(()=>{n.data||n.state==="loading"||g()},[]);const v=(o,p)=>{if(p==="collection"){const d=i==null?void 0:i[o-1];a(o),g({collection_id:[d==null?void 0:d.id]})}if(p==="category"){const d=c==null?void 0:c[o-1];a(o),g({category_id:[d==null?void 0:d.id]})}};return l.useEffect(()=>{!e&&n.data&&r(!0)},[n.data]),s.jsxs(s.Fragment,{children:[f&&s.jsx("div",{className:"pb-6",children:s.jsx(D,{selectedIndex:t,collections:i,onChange:o=>v(o,"collection")})}),w&&s.jsxs("div",{className:"pb-6",children:[s.jsx(R,{selectedIndex:t,categories:c,onChange:o=>v(o,"category")})," "]}),N&&s.jsx("div",{className:"mb-8 mt-8",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["There are no products to show",f||w?` in this ${f?"collection":"category"}.`:""]})}),!N&&s.jsx(O,{products:h})]})},U=l.memo(({className:e,heading:r,text:t,actions:a,...n})=>s.jsx("section",{className:j("mkt-section relative overflow-x-hidden",e),...n,children:s.jsx("div",{className:"mkt-section__inner relative z-[2]",children:s.jsxs(A,{children:[s.jsxs("p",{className:"text-center mb-12",children:[s.jsx("span",{className:"text-5xl font-title font-extrabold text-64px leading-48px uppercase",children:"Something"}),s.jsx("span",{className:"text-6xl font-centuryBook italic text-64px leading-48px pl-2",children:"New?"})]}),s.jsx(G,{...n})]})})}));export{U as P};
