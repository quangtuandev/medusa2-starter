import{j as e,d as w,r as v}from"./chunk-OIYGIGL5---YrJqpf.js";import{c as d}from"./clsx-B-dksMZM.js";import{F,a as N}from"./useRegion-BHTzJzYO.js";import{u as I}from"./useCart-CDjfJ-k4.js";import{u as C,M as D}from"./MorphingShape-BkAvCMIs.js";import{F as B}from"./PlusIcon-DPhLELc5.js";import{g as P,i as k,f as b,a as T}from"./prices-Yro40Uba.js";import{I as _}from"./Image-m9qvByfh.js";const Y=({className:t,...r})=>e.jsx("article",{className:d(t,"group"),...r,children:e.jsx("figure",{className:"aspect-w-1 aspect-h-1 h-full w-full overflow-hidden rounded-lg border",children:e.jsx("div",{className:"h-full w-full bg-gray-200 object-cover object-center group-hover:opacity-75"})})}),M=()=>{var s,a;const t=w({key:F.cart.createLineItem});return{addToCart:o=>{const n=new FormData;n.append("productId",o.productId),n.append("quantity",String(o.quantity||1)),o.options&&Object.entries(o.options).forEach(([l,i])=>{n.append(`options.${l}`,i)}),t.submit(n,{method:"post",action:"/api/cart/line-items/create"})},isLoading:t.state==="submitting"||t.state==="loading",error:(s=t.data)==null?void 0:s.errors,cart:(a=t.data)==null?void 0:a.cart,state:t.state}},z=({product:t,selectedOptions:r={},quantity:s=1,disabled:a=!1,className:o,variant:n="primary",size:l="md"})=>{const{t:i}=C(),{addToCart:u,isLoading:y}=M(),{toggleCartDrawer:x}=I(),p=g=>{g.preventDefault(),u({productId:t.id,options:r,quantity:s}),x(!0)},m=a||y,h="font-medium rounded-[100px] transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 flex items-center p-2",f={primary:{enabled:"bg-black text-white hover:bg-gray-800 focus:ring-gray-500",disabled:"bg-gray-300 text-gray-500 cursor-not-allowed"},secondary:{enabled:"bg-white text-black border border-black hover:bg-gray-50 focus:ring-gray-500",disabled:"bg-gray-100 text-gray-400 border border-gray-300 cursor-not-allowed"}},c=d(h,m?f[n].disabled:f[n].enabled,o);return e.jsxs("button",{onClick:p,disabled:m,className:c,"aria-label":`${i("common.addToCart")} ${t.title}`,children:[e.jsx("i",{className:"w-4",children:e.jsx(B,{className:"size-1"})}),e.jsx("span",{className:"text-nowrap btn-add opacity-0 w-0 h-0 transition-all duration-300 group-hover/product-card:opacity-100 group-hover/product-card:w-auto group-hover/product-card:h-auto",children:" Add to cart"})]})},A=({className:t})=>e.jsx("div",{className:d("inline-flex items-center rounded-md border border-gray-200 bg-gray-200 px-1.5 py-0.5 text-xs font-bold text-gray-600",t),children:"Sold out"}),O=t=>v.useMemo(()=>{var a,o;const r=((a=t.variants)==null?void 0:a.reduce((n,l)=>l.allow_backorder||!l.manage_inventory?1/0:n+(l.inventory_quantity||0),0))??0;return{averageInventory:r/(((o=t==null?void 0:t.variants)==null?void 0:o.length)??1),totalInventory:r}},[t]),q=({product:t,className:r})=>{const a=O(t).averageInventory===0;return e.jsx("div",{className:r,children:a&&e.jsx(A,{})})},L=({variant:t,currencyCode:r})=>{const{original:s,calculated:a}=P(t),o=k(a)&&a<(s??0);return e.jsx(e.Fragment,{children:o?e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{children:b(a,{currency:r})}),e.jsx("s",{className:"text-gray-400",children:b(s||0,{currency:r})})]}):b(s||0,{currency:r})})},R=({product:t,currencyCode:r,...s})=>{const a=v.useMemo(()=>s.variant||T(t),[s.variant,t,r]);return a?e.jsx(L,{variant:a,currencyCode:r}):null},V=()=>{const t=[{colorStart:"#FFFFFF",colorEnd:"#6DCB8F",offsetStart:8.85,offsetEnd:79.19},{colorStart:"#BEB1F8",colorEnd:"#8F5DDB",offsetStart:8.85,offsetEnd:79.19},{colorStart:"#BFFAED",colorEnd:"#BBEE7C",offsetStart:8.85,offsetEnd:79.19},{colorStart:"#EEF7FF",colorEnd:"#A2D4FD",offsetStart:8.85,offsetEnd:79.19},{colorStart:"#E4E3D8",colorEnd:"#89E4BB",offsetStart:8.85,offsetEnd:79.19},{colorStart:"#F5DDDD",colorEnd:"#FFB578",offsetStart:8.85,offsetEnd:79.19}];return{blur:20,zoom:.42,className:"flex justify-center",id:Math.random().toString(36).substring(2,15),...t[Math.floor(Math.random()*t.length)]}},tt=t=>{let r=t.trim();if(r.includes(" ")){const[n,...l]=r.split(/\s+/);return[n,"_"+l.join(" ")]}const s=Math.floor(r.length/2),a=r.slice(0,s),o=r.slice(s);return[a,"_"+o]},$=({product:t,className:r,isTransitioning:s,...a})=>{const o=t.images&&t.images[0]&&t.images[0].url||t.thumbnail,n=t.images&&t.images[1]&&t.images[1].url;return e.jsxs("figure",{className:d("product-thumbnail","aspect-w-1 aspect-h-1 w-full overflow-hidden",r),style:{viewTransitionName:s?"product-thumbnail":void 0},...a,children:[e.jsx(D,{...V()}),o?e.jsx(_,{loading:"lazy",src:o,alt:t.title,className:d("h-full w-full object-cover object-center transition-all duration-300 -rotate-[14deg]",{"group-hover/product-card:opacity-75":!n})}):e.jsx("div",{className:"flex h-full w-full items-center justify-center object-cover object-center group-hover/product-card:opacity-75",children:"No Image"})]})},Z={SIZE:"Size"},et=({product:t,className:r,isTransitioning:s,...a})=>{var m,h,f;const{region:o}=N(),[n,l]=v.useState(null),i=(m=t.options)==null?void 0:m.find(c=>c.title===Z.SIZE),u={};n&&i&&(u[i==null?void 0:i.id]=n);const x=!(i&&i.values&&i.values.length>0)||n,p=(h=t.variants)==null?void 0:h.find(c=>Object.entries(u).every(([g,S])=>{var j;return(j=c.options)==null?void 0:j.some(E=>E.option_id===g&&E.value===S)}));return p?e.jsxs("article",{className:d(r,"group/product-card text-left rounded-[32px] p-4 pb-6 overflow-hidden bg-white shadow-[5px_5px_10px_0px_#00000040]"),...a,children:[e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute right-2 top-2 z-10 flex gap-2",product:t}),e.jsx($,{isTransitioning:s,product:t})]}),e.jsx("h4",{className:"mt-4 overflow-hidden text-ellipsis font-extrabold font-title group-hover/product-card:text-[36px] transition-all duration-300 text-[28px]",children:t.title}),e.jsxs("div",{className:"flex gap-2 justify-between items-center",children:[e.jsx("div",{className:"flex gap-2 justify-center items-center",children:(f=i==null?void 0:i.values)==null?void 0:f.map(c=>e.jsx("span",{className:d("text-sm font-light  border border-[#716E6E] rounded-full px-2 py-1 hover:text-[#716E6E] hover:border-black text-[10px] font-display leading-none",{"!text-black !border-black":n===c.value}),onClick:g=>{l(c.value),g.preventDefault()},children:c.value},c.id))}),e.jsx(z,{product:t,selectedOptions:u,disabled:!x,variant:"primary"})]}),e.jsx("p",{className:"mt-1 text-lg font-extrabold font-title leading-none tracking-normal hover:text-[]",children:e.jsx(R,{product:t,variant:p,currencyCode:o.currency_code})})]}):null};export{Y as E,et as P,L as a,R as b,tt as g,V as r,O as u};
