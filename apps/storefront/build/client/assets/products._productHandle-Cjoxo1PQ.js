import{r as i,R as O,j as e,f as pe,l as Xe,w as Je,u as et}from"./chunk-OIYGIGL5-Dw2D8vFu.js";import{P as tt}from"./ProductList-CEjJRjxC.js";import{B as K}from"./Button-nspP1mxw.js";import{C as ye}from"./Container-Cka58j8f.js";import{F as rt,G as st,a as we}from"./GridColumn-DFw9Ve2O.js";import{S as Ne}from"./SubmitButton-GcA7ATgx.js";import{n as at,Q as nt}from"./coerce-CqrxpV6N.js";import{I as $e}from"./Image-DrDZq5nI.js";import{F as lt,L as it,S as Ie}from"./LightboxGallery-DOV7tzZi.js";import{u as ot}from"./useScrollArrows-BZQN77Qp.js";import{c as V}from"./clsx-B-dksMZM.js";import{M as ct}from"./MorphingShape-C-uetyU5.js";import{r as dt,u as ut,g as mt,b as pt}from"./ProductThumbnail-Dr2U9_lF.js";import{$ as _e,a as Ee,B as ft,W as xt,d as Fe,j as ht,K as gt}from"./tabs-W0_EixNg.js";import{o as q,p as bt,b as Le,m as vt,s as Te,Y as ne,y as le,n as fe,a as ie,K as oe,g as De,V as Be,u as jt,c as z,h as de,v as Ce,T as ae,d as Pe,G as yt}from"./use-is-mounted-Dk7IirPH.js";import{a as wt,E as Me,b as xe,L as Nt,m as Se,l as Ct,M as Pt,w as St,H as Ae,s as kt,c as Rt,g as ke,d as Re,P as Ot,e as $t}from"./ProductPriceRange-DI4M5Snj.js";import{r as Ge}from"./index-6F69r3HC.js";import{f as G,u as It,c as Oe}from"./PlusIcon-G-wafARz.js";import{u as _t,a as Et,R as Ft}from"./index-Cbew0HNx.js";import{P as Lt}from"./pagination-with-context-BRbHoxMG.js";import{u as Tt}from"./ProductListItem-D358sFdI.js";import{o as Dt,r as Bt,s as ue,b as Mt}from"./zod-BYecpI2c.js";import"./buildSearchParamsFromObject-CBTBPTA3.js";import"./ArrowRightIcon-DAEVZW4X.js";import"./IconButton-X0ifzMhi.js";import"./debounce-BJJYK4fz.js";import"./animation-BrpFQVme.js";import"./meta-DdeOJusI.js";function At(t,r,s){let[a,l]=i.useState(s),u=t!==void 0,x=i.useRef(u),o=i.useRef(!1),n=i.useRef(!1);return u&&!x.current&&!o.current?(o.current=!0,x.current=u,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")):!u&&x.current&&!n.current&&(n.current=!0,x.current=u,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")),[u?t:a,q(d=>(u||Ge.flushSync(()=>l(d)),r==null?void 0:r(d)))]}function Gt(t){let[r]=i.useState(t);return r}function qe(t={},r=null,s=[]){for(let[a,l]of Object.entries(t))He(s,Ue(r,a),l);return s}function Ue(t,r){return t?t+"["+r+"]":r}function He(t,r,s){if(Array.isArray(s))for(let[a,l]of s.entries())He(t,Ue(r,a.toString()),l);else s instanceof Date?t.push([r,s.toISOString()]):typeof s=="boolean"?t.push([r,s?"1":"0"]):typeof s=="string"?t.push([r,s]):typeof s=="number"?t.push([r,`${s}`]):s==null?t.push([r,""]):Ut(s)&&!i.isValidElement(s)&&qe(s,r,t)}function qt(t){var r,s;let a=(r=t==null?void 0:t.form)!=null?r:t.closest("form");if(a){for(let l of a.elements)if(l!==t&&(l.tagName==="INPUT"&&l.type==="submit"||l.tagName==="BUTTON"&&l.type==="submit"||l.nodeName==="INPUT"&&l.type==="image")){l.click();return}(s=a.requestSubmit)==null||s.call(a)}}function Ut(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let r=Object.getPrototypeOf(t);return r===null||Object.getPrototypeOf(r)===null}let Ht=i.createContext(null);function Wt({children:t}){let r=i.useContext(Ht);if(!r)return O.createElement(O.Fragment,null,t);let{target:s}=r;return s?Ge.createPortal(O.createElement(O.Fragment,null,t),s):null}function zt({data:t,form:r,disabled:s,onReset:a,overrides:l}){let[u,x]=i.useState(null),o=bt();return i.useEffect(()=>{if(a&&u)return o.addEventListener(u,"reset",a)},[u,r,a]),O.createElement(Wt,null,O.createElement(Yt,{setForm:x,formId:r}),qe(t).map(([n,d])=>O.createElement(Le,{features:Te.Hidden,...vt({key:n,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:r,disabled:s,name:n,value:d,...l})})))}function Yt({setForm:t,formId:r}){return i.useEffect(()=>{if(r){let s=document.getElementById(r);s&&t(s)}},[t,r]),r?null:O.createElement(Le,{features:Te.Hidden,as:"input",type:"hidden",hidden:!0,readOnly:!0,ref:s=>{if(!s)return;let a=s.closest("form");a&&t(a)}})}let Zt=i.createContext(void 0);function We(){return i.useContext(Zt)}function ze(t){let r=t.parentElement,s=null;for(;r&&!wt(r);)Me(r)&&(s=r),r=r.parentElement;let a=(r==null?void 0:r.getAttribute("disabled"))==="";return a&&Kt(s)?!1:a}function Kt(t){if(!t)return!1;let r=t.previousElementSibling;for(;r!==null;){if(Me(r))return!1;r=r.previousElementSibling}return!0}let ce=i.createContext(null);ce.displayName="LabelContext";function Ye(){let t=i.useContext(ce);if(t===null){let r=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,Ye),r}return t}function Ze(t){var r,s,a;let l=(s=(r=i.useContext(ce))==null?void 0:r.value)!=null?s:void 0;return((a=void 0)!=null?a:0)>0?[l,...t].filter(Boolean).join(" "):l}function Ke({inherit:t=!1}={}){let r=Ze(),[s,a]=i.useState([]),l=t?[r,...s].filter(Boolean):s;return[l.length>0?l.join(" "):void 0,i.useMemo(()=>function(u){let x=q(n=>(a(d=>[...d,n]),()=>a(d=>{let c=d.slice(),b=c.indexOf(n);return b!==-1&&c.splice(b,1),c}))),o=i.useMemo(()=>({register:x,slot:u.slot,name:u.name,props:u.props,value:u.value}),[x,u.slot,u.name,u.props,u.value]);return O.createElement(ce.Provider,{value:o},u.children)},[a])]}let Vt="label";function Qt(t,r){var s;let a=i.useId(),l=Ye(),u=We(),x=xe(),{id:o=`headlessui-label-${a}`,htmlFor:n=u??((s=l.props)==null?void 0:s.htmlFor),passive:d=!1,...c}=t,b=le(r);fe(()=>l.register(o),[o,l.register]);let N=q(y=>{let v=y.currentTarget;if(!(y.target!==y.currentTarget&&Nt(y.target))&&(Se(v)&&y.preventDefault(),l.props&&"onClick"in l.props&&typeof l.props.onClick=="function"&&l.props.onClick(y),Se(v))){let m=document.getElementById(v.htmlFor);if(m){let w=m.getAttribute("disabled");if(w==="true"||w==="")return;let C=m.getAttribute("aria-disabled");if(C==="true"||C==="")return;(Ct(m)&&(m.type==="file"||m.type==="radio"||m.type==="checkbox")||m.role==="radio"||m.role==="checkbox"||m.role==="switch")&&m.click(),m.focus({preventScroll:!0})}}}),f=ie({...l.slot,disabled:x||!1}),h={ref:b,...l.props,id:o,htmlFor:n,onClick:N};return d&&("onClick"in h&&(delete h.htmlFor,delete h.onClick),"onClick"in c&&delete c.onClick),oe()({ourProps:h,theirProps:c,slot:f,defaultTag:n?Vt:"div",name:l.name||"Label"})}let Xt=ne(Qt),Ve=Object.assign(Xt,{});function Jt(t,r){return t!==null&&r!==null&&typeof t=="object"&&typeof r=="object"&&"id"in t&&"id"in r?t.id===r.id:t===r}function er(t=Jt){return i.useCallback((r,s)=>{if(typeof t=="string"){let a=t;return(r==null?void 0:r[a])===(s==null?void 0:s[a])}return t(r,s)},[t])}var tr=(t=>(t[t.RegisterOption=0]="RegisterOption",t[t.UnregisterOption=1]="UnregisterOption",t))(tr||{});let rr={0(t,r){let s=[...t.options,{id:r.id,element:r.element,propsRef:r.propsRef}];return{...t,options:yt(s,a=>a.element.current)}},1(t,r){let s=t.options.slice(),a=t.options.findIndex(l=>l.id===r.id);return a===-1?t:(s.splice(a,1),{...t,options:s})}},he=i.createContext(null);he.displayName="RadioGroupDataContext";function ge(t){let r=i.useContext(he);if(r===null){let s=new Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ge),s}return r}let be=i.createContext(null);be.displayName="RadioGroupActionsContext";function ve(t){let r=i.useContext(be);if(r===null){let s=new Error(`<${t} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,ve),s}return r}function sr(t,r){return jt(r.type,rr,t,r)}let ar="div";function nr(t,r){let s=i.useId(),a=xe(),{id:l=`headlessui-radiogroup-${s}`,value:u,form:x,name:o,onChange:n,by:d,disabled:c=a||!1,defaultValue:b,tabIndex:N=0,...f}=t,h=er(d),[y,v]=i.useReducer(sr,{options:[]}),m=y.options,[w,C]=Ke(),[F,$]=Ae(),D=i.useRef(null),U=le(D,r),I=Gt(b),[R,B]=At(u,n,I),T=i.useMemo(()=>m.find(j=>!j.propsRef.current.disabled),[m]),L=i.useMemo(()=>m.some(j=>h(j.propsRef.current.value,R)),[m,R]),E=q(j=>{var M;if(c||h(j,R))return!1;let S=(M=m.find(p=>h(p.propsRef.current.value,j)))==null?void 0:M.propsRef.current;return S!=null&&S.disabled?!1:(B==null||B(j),!0)}),Q=q(j=>{if(!D.current)return;let M=m.filter(S=>S.propsRef.current.disabled===!1).map(S=>S.element.current);switch(j.key){case z.Enter:qt(j.currentTarget);break;case z.ArrowLeft:case z.ArrowUp:if(j.preventDefault(),j.stopPropagation(),Ce(M,ae.Previous|ae.WrapAround)===Pe.Success){let S=m.find(p=>de(p.element.current));S&&E(S.propsRef.current.value)}break;case z.ArrowRight:case z.ArrowDown:if(j.preventDefault(),j.stopPropagation(),Ce(M,ae.Next|ae.WrapAround)===Pe.Success){let S=m.find(p=>de(p.element.current));S&&E(S.propsRef.current.value)}break;case z.Space:{j.preventDefault(),j.stopPropagation();let S=m.find(p=>de(p.element.current));S&&E(S.propsRef.current.value)}break}}),Y=q(j=>(v({type:0,...j}),()=>v({type:1,id:j.id}))),X=i.useMemo(()=>({value:R,firstOption:T,containsCheckedOption:L,disabled:c,compare:h,tabIndex:N,...y}),[R,T,L,c,h,N,y]),J=i.useMemo(()=>({registerOption:Y,change:E}),[Y,E]),ee={ref:U,id:l,role:"radiogroup","aria-labelledby":w,"aria-describedby":F,onKeyDown:Q},te=ie({value:R}),re=i.useCallback(()=>{if(I!==void 0)return E(I)},[E,I]),se=oe();return O.createElement($,{name:"RadioGroup.Description"},O.createElement(C,{name:"RadioGroup.Label"},O.createElement(be.Provider,{value:J},O.createElement(he.Provider,{value:X},o!=null&&O.createElement(zt,{disabled:c,data:{[o]:R||"on"},overrides:{type:"radio",checked:R!=null},form:x,onReset:re}),se({ourProps:ee,theirProps:f,slot:te,defaultTag:ar,name:"RadioGroup"})))))}let lr="div";function ir(t,r){var s;let a=ge("RadioGroup.Option"),l=ve("RadioGroup.Option"),u=i.useId(),{id:x=`headlessui-radiogroup-option-${u}`,value:o,disabled:n=a.disabled||!1,autoFocus:d=!1,...c}=t,b=i.useRef(null),N=le(b,r),[f,h]=Ke(),[y,v]=Ae(),m=De({value:o,disabled:n});fe(()=>l.registerOption({id:x,element:b,propsRef:m}),[x,l,b,m]);let w=q(L=>{var E;if(ze(L.currentTarget))return L.preventDefault();l.change(o)&&((E=b.current)==null||E.focus())}),C=((s=a.firstOption)==null?void 0:s.id)===x,{isFocusVisible:F,focusProps:$}=_e({autoFocus:d}),{isHovered:D,hoverProps:U}=Ee({isDisabled:n}),I=a.compare(a.value,o),R=Be({ref:N,id:x,role:"radio","aria-checked":I?"true":"false","aria-labelledby":f,"aria-describedby":y,"aria-disabled":n?!0:void 0,tabIndex:n?-1:I||!a.containsCheckedOption&&C?a.tabIndex:-1,onClick:n?void 0:w,autoFocus:d},$,U),B=ie({checked:I,disabled:n,active:F,hover:D,focus:F,autofocus:d}),T=oe();return O.createElement(v,{name:"RadioGroup.Description"},O.createElement(h,{name:"RadioGroup.Label"},T({ourProps:R,theirProps:c,slot:B,defaultTag:lr,name:"RadioGroup.Option"})))}let or="span";function cr(t,r){var s;let a=ge("Radio"),l=ve("Radio"),u=i.useId(),x=We(),o=xe(),{id:n=x||`headlessui-radio-${u}`,value:d,disabled:c=a.disabled||o||!1,autoFocus:b=!1,...N}=t,f=i.useRef(null),h=le(f,r),y=Ze(),v=St(),m=De({value:d,disabled:c});fe(()=>l.registerOption({id:n,element:f,propsRef:m}),[n,l,f,m]);let w=q(T=>{var L;if(ze(T.currentTarget))return T.preventDefault();l.change(d)&&((L=f.current)==null||L.focus())}),{isFocusVisible:C,focusProps:F}=_e({autoFocus:b}),{isHovered:$,hoverProps:D}=Ee({isDisabled:c}),U=((s=a.firstOption)==null?void 0:s.id)===n,I=a.compare(a.value,d),R=Be({ref:h,id:n,role:"radio","aria-checked":I?"true":"false","aria-labelledby":y,"aria-describedby":v,"aria-disabled":c?!0:void 0,tabIndex:c?-1:I||!a.containsCheckedOption&&U?a.tabIndex:-1,autoFocus:b,onClick:c?void 0:w},F,D),B=ie({checked:I,disabled:c,hover:$,focus:C,autofocus:b});return oe()({ourProps:R,theirProps:N,slot:B,defaultTag:or,name:"Radio"})}let dr=ne(nr),ur=ne(ir),Qe=ne(cr),mr=Ve,pr=Pt,fr=Object.assign(dr,{Option:ur,Radio:Qe,Label:mr,Description:pr});function xr({title:t,titleId:r,...s},a){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},s),t?i.createElement("title",{id:r},t):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const hr=i.forwardRef(xr),gr=Dt({productId:ue().min(1,"Product ID is required"),options:Bt(ue(),ue().optional()).default({}),quantity:at().int().min(1,"Quantity must be at least 1")});i.memo(({galleryImages:t})=>e.jsx(e.Fragment,{children:t.map((r,s)=>e.jsx(Fe,{className:"relative mb-0 mr-0 inline-block h-16 w-16 flex-none snap-start whitespace-nowrap rounded-lg overflow-hidden bg-white text-sm font-medium uppercase text-gray-900 last:mb-0 hover:bg-gray-50 focus:outline-none focus:ring-0 transition-all duration-200 lg:mb-3 lg:h-20 lg:w-20",children:({selected:a})=>e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sr-only",children:r.name}),e.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-lg",children:e.jsx($e,{src:r.url,alt:r.alt||"tab for image gallery",className:"h-full w-full object-cover object-center transition-transform duration-200 hover:scale-105"},r.id)}),e.jsx("span",{className:V("pointer-events-none absolute inset-0 rounded-lg border-2 transition-all duration-200",{"border-blue-500 shadow-lg":a,"border-gray-200":!a}),"aria-hidden":"true"}),a&&e.jsx("span",{className:"absolute inset-0 rounded-lg bg-blue-500/10","aria-hidden":"true"})]})},r.id))}));const br=({product:t,variantImage:r})=>{const{images:s=[],thumbnail:a}=t,l=s??[],[u,x]=i.useState(-1),[o,n]=i.useState(0),{scrollableDivRef:d}=ot({buffer:50,resetOnDepChange:[t]}),c=(l==null?void 0:l.length)<1&&a?[{id:"thumbnail",name:`Thumbnail for ${t.title}`,url:a,alt:t.description||t.title}]:l,b=f=>{f.preventDefault(),n(h=>(h+1)%c.length)},N=f=>{f.preventDefault(),n(h=>(h-1+c.length)%c.length)};return i.useEffect(()=>{const f=c.findIndex(h=>h.url===r);f!==-1&&n(f)},[r]),e.jsxs(ft,{as:"div",className:"flex flex-col gap-4 lg:flex-row lg:gap-6",selectedIndex:o,onChange:n,children:[e.jsx("h2",{className:"sr-only",children:"Images"}),c.length>1&&e.jsxs("div",{className:"absolute -bottom-8 flex justify-center w-full gap-4",children:[e.jsx(xt,{ref:d,className:"flex flex-row gap-2 p-3 bg-[#D1D1D1] rounded-full",children:c.map((f,h)=>e.jsx(Fe,{className:"relative flex w-2 h-2 items-center justify-center cursor-pointer rounded-lg transition-all duration-200 focus:outline-none aria-selected:border-blue-500",children:({selected:y})=>e.jsx(e.Fragment,{children:e.jsx("span",{className:V("absolute h-2 w-2 rounded-full transition-colors duration-300 bg-white",{"opacity-40":!y})})})},f.id))}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("button",{onClick:N,className:"w-8 h-8 py-1 bg-[#D1D1D1] rounded-full flex items-center justify-center focus:outline-none focus:ring-0 hover:bg-gray-300",children:e.jsx(rt,{className:"h-5 w-5 text-white"})}),e.jsx("button",{onClick:b,className:"w-8 h-8 py-1 bg-[#D1D1D1] rounded-full flex items-center justify-center focus:outline-none focus:ring-0 hover:bg-gray-300",children:e.jsx(hr,{className:"h-5 w-5 text-white"})})]})]}),e.jsx(ht,{className:"flex-1",children:e.jsx("div",{className:"relative rounded-2xl overflow-hidden",children:c.length>0?c.map((f,h)=>e.jsxs(gt,{className:"group relative w-1/2 mx-auto overflow-hidden cursor-pointer",onClick:()=>x(h),children:[e.jsx(ct,{...dt(t.subtitle),zoom:.5,classNameWrapper:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 !h-auto"}),e.jsx($e,{style:{viewTransitionName:"product-thumbnail"},src:f.url,alt:f.alt||"selected image for product",className:"h-full w-full object-contain object-center transition-transform duration-300 group-hover:scale-105 -rotate-[14deg]"},f.id),e.jsx("div",{className:"absolute right-4 top-4 flex items-center justify-center rounded-xl bg-white/90 backdrop-blur-sm p-2.5 opacity-0 transition-all duration-300 shadow-lg group-hover:opacity-100 hover:scale-110",children:e.jsx(lt,{className:"h-5 w-5 text-gray-700"})})]},f.id)):e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-100 rounded-2xl",children:e.jsx("span",{className:"text-gray-400",children:"No Image"})})})}),e.jsx(it,{images:c.map(f=>({src:f.url,alt:f.alt||"Product image"})),lightBoxIndex:u,setLightBoxIndex:x})]})},vr=({option:t,onChange:r,value:s,currencyCode:a})=>{const l=(o,n)=>{r&&r(o,n)},x=[...t.values.filter((o,n,d)=>d.findIndex(c=>c.value===o.value)===n)].sort((o,n)=>{const d=o.minPrice||o.exactPrice||0,c=n.minPrice||n.exactPrice||0;return d-c});return e.jsx(fr,{name:`options.${t.id}`,value:s,onChange:o=>l(t.id,o),children:e.jsx("div",{className:"flex gap-2",children:x.map((o,n)=>(o.minPrice!==void 0&&o.maxPrice!==void 0?o.minPrice===o.maxPrice?G(o.minPrice,{currency:a}):`${G(o.minPrice,{currency:a})}${G(o.maxPrice,{currency:a})}`:o.exactPrice!==void 0&&(G(o.exactPrice,{currency:a}),o.discountPercentage&&`${o.discountPercentage}`),e.jsx(Qe,{value:o.value,disabled:o.disabled,className:({checked:d,disabled:c})=>V("group",d?"ring-highlight ring-1 bg-highlight":"bg-white border-black","active:ring-highlight relative col-span-1 flex h-full  flex-col justify-between rounded-full border px-12 py-1 font-bold shadow-sm hover:bg-highlight/40 focus:outline-none",c?"opacity-50":""),children:({checked:d})=>e.jsx(Ve,{as:"div",className:"flex items-center w-full",children:e.jsxs("div",{className:"flex-grow",children:[e.jsx("span",{className:V("text-base",d?"text-primary-800":"text-gray-900"),children:o.value}),o.disabled&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(not available)"})]})})},n)))})})},jr=({option:t,onChange:r,value:s,currencyCode:a})=>{const{register:l}=_t(),o=[...t.values.filter((n,d,c)=>c.findIndex(b=>b.value===n.value)===d)].sort((n,d)=>{const c=n.minPrice??n.exactPrice??0,b=d.minPrice??d.exactPrice??0;return c-b}).map(n=>{let d=n.value;return n.minPrice!==void 0&&n.maxPrice!==void 0?n.minPrice===n.maxPrice?d+=` - ${G(n.minPrice,{currency:a})}`:d+=` - ${G(n.minPrice,{currency:a})} â€“ ${G(n.maxPrice,{currency:a})}`:n.exactPrice!==void 0&&(d+=` - ${G(n.exactPrice,{currency:a})}`,n.discountPercentage&&(d+=` (${n.discountPercentage}% off)`)),{value:n.value,label:d}});return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:t.id,className:"text-sm font-medium text-gray-700",children:t.title}),e.jsx("select",{...l(`options.${t.id}`),id:t.id,className:"form-select",defaultValue:s,children:o.map((n,d)=>e.jsx("option",{value:n.value,children:n.label||n.value},d))})]})},yr=({productId:t,onSubmitSuccess:r,onCancel:s})=>{const[a,l]=i.useState(""),[u,x]=i.useState(""),[o,n]=i.useState(5),[d,c]=i.useState(null),[b,N]=i.useState(!1),f=pe(),h=f.state!=="idle";i.useEffect(()=>{var v,m,w;if((v=f.data)!=null&&v.success){N(!0),l(""),x(""),n(5),c(null);const C=setTimeout(()=>{N(!1),r&&r()},2e3);return()=>clearTimeout(C)}else if((m=f.data)!=null&&m.error)c(f.data.error);else if((w=f.data)!=null&&w.errors){const C=Object.entries(f.data.errors).filter(([F,$])=>$&&$.length>0).map(([F,$])=>`${F}: ${($==null?void 0:$[0])||"Invalid"}`).join(", ");c(C||"Validation failed")}},[f.data,r]);const y=v=>{if(v.preventDefault(),c(null),!a.trim()){c("Please enter your name");return}if(!u.trim()){c("Please write a review");return}if(u.length<10){c("Review must be at least 10 characters");return}if(o<1||o>5){c("Please select a rating between 1 and 5");return}const m=new FormData;m.append("product_id",t),m.append("name",a),m.append("content",u),m.append("stars",o.toString()),f.submit(m,{method:"POST",action:"/api/product-reviews/create"})};return e.jsxs("form",{onSubmit:y,className:"space-y-6 bg-white p-6 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Write a Review"}),b&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 text-green-800",children:[e.jsx("p",{className:"font-semibold",children:"Thank you!"}),e.jsx("p",{className:"text-sm mt-1",children:"Your review has been submitted and is pending approval."})]}),d&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 text-red-800",children:[e.jsx("p",{className:"font-semibold",children:"Error"}),e.jsx("p",{className:"text-sm mt-1",children:d})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rating ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ie,{value:o,onChange:v=>n(v),readOnly:!1}),e.jsx("span",{className:"text-sm text-gray-600 ml-2",children:o===0?"No rating":`${o} out of 5 stars`})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"name",type:"text",name:"name",value:a,onChange:v=>l(v.target.value),placeholder:"Enter your name",disabled:h,maxLength:255,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:["Your Review ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{id:"content",name:"content",value:u,onChange:v=>x(v.target.value),placeholder:"Tell us what you think about this product...",disabled:h,maxLength:1e3,rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed resize-none",required:!0}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[u.length,"/1000 characters"]})]}),e.jsxs("div",{className:"flex gap-3 justify-between",children:[e.jsx(K,{type:"button",variant:"default",onClick:s,disabled:h,className:"flex-1",children:"Cancel"}),e.jsx(K,{type:"submit",variant:"primary",disabled:h,className:"flex-1",children:h?"Submitting...":"Submit Review"})]})]})},wr=({productReviews:t})=>e.jsxs("div",{children:[t&&t.length>0&&e.jsx("div",{className:"space-y-8",children:t.map((r,s)=>e.jsxs("div",{className:"py-8",children:[e.jsxs("div",{className:" flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("svg",{width:"54",height:"53",viewBox:"0 0 54 53",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"27.5",cy:"21.5",r:"11.5",fill:"#FFE977"}),e.jsx("path",{d:"M34 39.6667C34 41.8758 29.8932 45 27.5 45C25.1068 45 21 41.8758 21 39.6667C21 37.4575 25.1068 37 27.5 37C29.8932 37 34 37.4575 34 39.6667Z",fill:"#FFE977"}),e.jsx("path",{d:"M27 0.706055C41.5344 0.706055 53.2939 12.2666 53.2939 26.5C53.2939 40.7334 41.5344 52.2939 27 52.2939C12.4656 52.2939 0.706055 40.7334 0.706055 26.5C0.706055 12.2666 12.4656 0.706055 27 0.706055Z",stroke:"black","stroke-width":"1.41144"})]})}),e.jsx("h3",{className:"px-1.5 font-title font-extrabold text-[32px] leading-[42px] tracking-normal uppercase line-clamp-1 text-center",children:r.name??"Anonymous"}),e.jsx("div",{className:"mt-1 flex items-center pb-1",children:e.jsx(Ie,{value:r.stars??0,readOnly:!0})}),e.jsxs("p",{className:"sr-only",children:[r.stars," out of 5 stars"]})]}),e.jsx("div",{className:"mt-4 space-y-6 text-base text-gray-600",dangerouslySetInnerHTML:{__html:r.content}})]},r.id))}),(!t||t.length===0)&&e.jsx("div",{className:"mb-8 text-center py-8 text-gray-500",children:e.jsx("p",{className:"text-lg",children:"No reviews yet. Be the first to review this product!"})})]}),Nr=({context:t,paginationConfig:r,className:s,...a})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:s,children:[e.jsx(wr,{...a}),r&&e.jsx(Lt,{context:t,paginationConfig:r,section:"reviews"})]})}),Cr=()=>{const t=Xe("routes/products.$productHandle");if(!t)return null;const{product:r,productReviews:s}=t,[a,l]=i.useState(!1),u=()=>{l(!1),window.location.reload()};return e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"text-5xl font-title font-extrabold text-64px leading-48px uppercase",children:"Customer"}),e.jsx("span",{className:"text-6xl font-centuryBook italic text-64px leading-48px pl-2",children:"Review"})]}),e.jsx("section",{id:"reviews",className:"container mx-auto my-12 grid grid-cols-12 px-8",children:e.jsx(Nr,{className:"col-span-12",productId:r.id,productReviews:s.reviews,context:`products/${r.handle}`,paginationConfig:{limit:s.limit,offset:s.offset,count:s.count}})}),e.jsxs("div",{children:[a&&e.jsx(yr,{productId:r.id,onSubmitSuccess:u,onCancel:()=>l(!1)}),!a&&e.jsx("div",{className:"my-8 text-center",children:e.jsx(K,{variant:"primary",size:"lg",onClick:()=>l(!0),children:e.jsx("span",{className:"font-semibold text-lg",children:"Write a Review"})})})]})]})},me=({title:t,children:r,initiallyOpen:s=!1,className:a=""})=>{const[l,u]=i.useState(s),x=()=>{u(o=>!o)};return e.jsxs("div",{className:V("collasape-component",a,{"bg-[radial-gradient(36.36%_53.14%_at_5.59%_100%,rgba(255,233,119,0.5)_0%,rgba(255,255,255,0.5)_100%)]":l}),children:[e.jsxs("button",{type:"button",className:"collasape-header text-[24px] leading-[32px] tracking-normal uppercase flex items-center justify-between w-full text-left p-2 cursor-pointer bg-none border-none outline-none font-bold text-sm transition-all duration-300","aria-expanded":l,onClick:x,children:[t,l?e.jsxs("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{filter:"url(#filter0_d_276_82)",children:[e.jsx("circle",{cx:"21",cy:"17",r:"13",transform:"rotate(-90 21 17)",fill:"#FFE977"}),e.jsx("path",{d:"M21.7071 12.2929C21.3166 11.9024 20.6834 11.9024 20.2929 12.2929L13.9289 18.6569C13.5384 19.0474 13.5384 19.6805 13.9289 20.0711C14.3195 20.4616 14.9526 20.4616 15.3431 20.0711L21 14.4142L26.6569 20.0711C27.0474 20.4616 27.6805 20.4616 28.0711 20.0711C28.4616 19.6805 28.4616 19.0474 28.0711 18.6569L21.7071 12.2929ZM21 14L22 14L22 13L21 13L20 13L20 14L21 14Z",fill:"black"})]}),e.jsx("defs",{children:e.jsxs("filter",{id:"filter0_d_276_82",x:"0",y:"0",width:"42",height:"42",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[e.jsx("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),e.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),e.jsx("feOffset",{dy:"4"}),e.jsx("feGaussianBlur",{stdDeviation:"4"}),e.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),e.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.57005 0 0 0 0 0.509485 0 0 0 0 0.191522 0 0 0 1 0"}),e.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_82"}),e.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_276_82",result:"shape"})]})})]}):e.jsxs("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("g",{filter:"url(#filter0_d_276_73)",children:[e.jsx("circle",{cx:"21",cy:"17",r:"13",transform:"rotate(90 21 17)",fill:"black"}),e.jsx("path",{d:"M20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071L28.0711 15.3431C28.4616 14.9526 28.4616 14.3195 28.0711 13.9289C27.6805 13.5384 27.0474 13.5384 26.6569 13.9289L21 19.5858L15.3431 13.9289C14.9526 13.5384 14.3195 13.5384 13.9289 13.9289C13.5384 14.3195 13.5384 14.9526 13.9289 15.3431L20.2929 21.7071ZM21 20L20 20L20 21L21 21L22 21L22 20L21 20Z",fill:"white"})]}),e.jsx("defs",{children:e.jsxs("filter",{id:"filter0_d_276_73",x:"0",y:"0",width:"42",height:"42",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[e.jsx("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),e.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),e.jsx("feOffset",{dy:"4"}),e.jsx("feGaussianBlur",{stdDeviation:"4"}),e.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),e.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.57005 0 0 0 0 0.509485 0 0 0 0 0.191522 0 0 0 1 0"}),e.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_73"}),e.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_276_73",result:"shape"})]})})]})]}),e.jsx("div",{className:"collasape-content",style:{maxHeight:l?"1000px":"0px",overflow:"hidden",transition:"max-height 0.3s ease",padding:l?"1rem":"0 1rem"},"aria-hidden":!l,children:l&&r})]})},Pr=t=>!!(t!=null&&t.manage_inventory&&(t==null?void 0:t.inventory_quantity)<1),Sr=({product:t})=>{var E,Q,Y,X,J,ee,te,re,se,j,M,S;const r=i.useRef(null),s=pe({key:Oe.cart.createLineItem}),{toggleCartDrawer:a}=ut(),{region:l}=It(),u=Object.keys(((E=s.data)==null?void 0:E.errors)||{}).length>0,x=["submitting","loading"].includes(s.state),o={productId:t.id,quantity:"1",options:i.useMemo(()=>{var g,k;const p=(g=t.variants)==null?void 0:g[0];return p&&p.options?p.options.reduce((P,_)=>(_.option_id&&_.value&&(P[_.option_id]=_.value),P),{}):((k=t.options)==null?void 0:k.reduce((P,_)=>{var H;return!_.id||!((H=_.values)!=null&&H.length)||(P[_.id]=_.values[0].value),P},{}))||{}},[t])},n=Et({resolver:Mt(gr),defaultValues:o,fetcher:s,submitConfig:{method:"post",action:"/api/cart/line-items/create",encType:"multipart/form-data"}}),d=l.currency_code,[c,b]=i.useState(o.options),[N,f]=i.useState(!1),[h,y]=i.useState([]),v=i.useMemo(()=>{var p;return(p=t.options)==null?void 0:p.map(({id:g})=>c[g])},[t,c]),m=i.useMemo(()=>kt(t),[t]),w=i.useMemo(()=>Rt(m,v),[m,v]),C=i.useMemo(()=>{var p;return(p=t.options)==null?void 0:p.map((g,k)=>{var Z;if(k===0){const W=ke(k,d,g.values||[],m,v);return{title:g.title,product_id:g.product_id,id:g.id,values:W}}const P=Re(t,c,g.id),_=(Z=g.values)==null?void 0:Z.filter(W=>P.some(A=>A.value===W.value)),H=ke(k,d,_||[],m,v);return{title:g.title,product_id:g.product_id,id:g.id,values:H}})},[t,c,d,m,v]),F=Tt(t).averageInventory===0,$=(p,g,k)=>{var W;const P={...p};P[g]=k;const _=((W=t.options)==null?void 0:W.map(A=>A.id))||[],H=_.indexOf(g),Z=H>=0?_.slice(H+1):[];return Z.length>0&&Z.forEach(A=>{if(!A)return;const je=Re(t,P,A);je.length>0?P[A]=je[0].value:P[A]=""}),P},D=p=>{const g=p.target.name.replace("options.",""),k=p.target.value,P=$(c,g,k);b(P),n.setValue("options",P)},U=i.useMemo(()=>(w==null?void 0:w.thumbnail)||t.thumbnail,[w]),I=(p,g)=>{const k=$(c,p,g);b(k),n.setValue("options",k)};i.useEffect(()=>{if(!x&&!u&&r.current){r.current.reset();const p=r.current.querySelector('input[name="quantity"]');p&&(p.value="1");const g=r.current.querySelector('input[name="productId"]');g&&(g.value=t.id)}},[x,u,t.id]),i.useEffect(()=>{Object.keys(c).length===0&&b(o.options)},[o.options,c]),i.useEffect(()=>{b(o.options)},[o.options]);const R=Pr(w)||F,B=i.useCallback(()=>{a(!0)},[a]),T=i.useCallback(async()=>{if(N)return;f(!0);const p=new FormData;p.append("productId",t.id),p.append("quantity",n.getValues("quantity"));const g=n.getValues("options");Object.entries(g).forEach(([k,P])=>{p.append(`options.${k}`,P)});try{(await fetch("/api/cart/line-items/create",{method:"POST",body:p})).ok?window.location.href="/checkout":(console.error("Failed to add item to cart"),f(!1))}catch(k){console.error("Error adding item to cart:",k),f(!1)}},[t.id,n,N]);i.useEffect(()=>{const p=mt(t.title);p.length>1?y(p):y([t.title])},[t.title]),pe({key:Oe.cart.updateLineItem});const L=p=>{n.setValue("quantity",p.toString())};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"pb-12 pt-12 min-h-screen",children:e.jsx(Ft,{...n,children:e.jsxs(s.Form,{id:"addToCartForm",ref:r,method:"post",action:"/api/cart/line-items/create",onSubmit:B,children:[e.jsx("input",{type:"hidden",name:"productId",value:t.id}),e.jsx(ye,{className:"px-0 sm:px-6 md:px-8",children:e.jsxs(st,{className:"!gap-0 overflow-visible",children:[e.jsxs(we,{className:"mb-8 md:col-span-6 sticky top-[144px] [height:min-content]",children:[e.jsx("h2",{className:"xl:text-[100px] font-bold text-gray-900 leading-[5rem]",children:h[0]}),e.jsx(br,{product:t,variantImage:U},t.id),e.jsxs("div",{className:"flex gap-4 items-end justify-between",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[h[1]&&e.jsx("h2",{className:"xl:text-[100px] font-bold text-gray-900",children:h[1]}),e.jsx("p",{className:"text-gray-900 font-bold flex gap-3",children:e.jsx("span",{className:"text-5xl",children:w?e.jsx(pt,{product:t,variant:w,currencyCode:d}):e.jsx(Ot,{product:t,currencyCode:d})})})]}),e.jsxs("div",{className:"flex flex-col items-end gap-6",children:[!R&&e.jsx(nt,{variant:w,onChange:L}),e.jsx("div",{className:"flex-1",children:R?e.jsx(Ne,{disabled:!0,className:"pointer-events-none !h-12 w-full !text-base !font-bold opacity-50",children:"Sold out"}):e.jsx(Ne,{variant:"ghost",size:"image",disabled:x||N,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("img",{src:"/assets/images/add-to-cart.svg",alt:"Add to cart",className:"w-auto h-[108px]"})})})]})]})]}),e.jsx(we,{className:"flex flex-col md:col-span-6",children:e.jsxs("div",{className:"h-fit",children:[e.jsxs("div",{className:"px-0 sm:px-6 md:p-10 md:pt-0",children:[e.jsx("div",{className:"flex items-center gap-4 py-2",children:e.jsx("div",{className:"flex-1",children:R?e.jsx(K,{disabled:!0,className:"pointer-events-none !h-12 !text-base !font-bold opacity-50 bg-gray-300 text-gray-500",children:"Sold out"}):e.jsx(K,{variant:"primary",onClick:T,disabled:x||N,className:"!h-12 whitespace-nowrap !text-base !font-bold transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Processing...":"Buy Now"})})}),C&&C.length>5&&e.jsxs("section",{"aria-labelledby":"product-options",className:"product-options",children:[e.jsx("h2",{id:"product-options",className:"sr-only",children:"Product options"}),e.jsx("div",{className:"space-y-4",children:C.map((p,g)=>e.jsx(jr,{option:p,value:c[p.id],onChange:D,currencyCode:d},g))})]}),C&&C.length<=5&&e.jsxs("section",{"aria-labelledby":"product-options",className:"product-options my-6 grid gap-4",children:[e.jsx("h2",{id:"product-options",className:"sr-only",children:"Product options"}),C.map((p,g)=>e.jsx("div",{children:e.jsx(vr,{option:p,value:c[p.id],onChange:I,currencyCode:d})},g))]}),e.jsxs("div",{className:"my-2 flex flex-col gap-2",children:[!!t.description&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"whitespace-pre-wrap text-base text-primary-800",children:t.description})}),((Q=t.metadata)==null?void 0:Q.notes)&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(Y=t.metadata)==null?void 0:Y.notes}})})]})]}),e.jsx("div",{className:"container mx-auto grid grid-cols-12 px-8 gap-[20px]",children:e.jsx("hr",{className:"col-span-8 border-t-[1px] border-primary"})}),e.jsxs("div",{className:"container mx-auto my-12 grid grid-cols-12 px-8 p-4 gap-[20px]",children:[((X=t.metadata)==null?void 0:X.ingredients)&&e.jsx(me,{className:"col-span-12 p-4 rounded-[32px] shadow-[0px_4px_6px_0px_#00000040]",title:"INGREDIENTS",initiallyOpen:!1,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(J=t.metadata)==null?void 0:J.ingredients}})}),((ee=t.metadata)==null?void 0:ee.precautions_of_use)&&e.jsx(me,{className:"col-span-12 p-4 rounded-[32px] shadow-[0px_4px_6px_0px_#00000040]",title:"PRECAUTIONS OF USE",initiallyOpen:!1,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(te=t.metadata)==null?void 0:te.precautions_of_use}})}),((re=t.metadata)==null?void 0:re.application_tips)&&e.jsx(me,{className:"col-span-12 p-4 rounded-[32px] shadow-[0px_4px_6px_0px_#00000040]",title:"APPLICATION TIPS",initiallyOpen:!1,children:e.jsx("div",{dangerouslySetInnerHTML:{__html:(se=t.metadata)==null?void 0:se.application_tips}})})]}),!!((j=t.metadata)!=null&&j.ingredients)||!!((M=t.metadata)!=null&&M.precautions_of_use)||!!((S=t.metadata)!=null&&S.application_tips)&&e.jsx("div",{className:"container mx-auto grid grid-cols-12 px-8 gap-[20px]",children:e.jsx("hr",{className:"col-span-8 border-t-[1px] border-primary"})})]})})]})})]})})}),e.jsx(ye,{children:e.jsx(Cr,{})})]})},ts=$t,rs=Je(function(){const{product:r}=et();return e.jsxs(e.Fragment,{children:[e.jsx(Sr,{product:r}),e.jsx(tt,{className:"!pb-[100px] xl:px-9",heading:"You may also like"})]})});export{rs as default,ts as meta};
