import{T as G}from"./chunk-V3MOBCDF-Fr8ItIPO.js";import{u as q}from"./chunk-CVCFQMSO-Bzrohd0g.js";import{u as N,a as Q,b as J}from"./chunk-ETF2DN4M-DJLlSQ44.js";import{u as K,a as W,b as Y}from"./chunk-ZJRFL6ZN-CPaNBd5d.js";import{b as Z,u as V,a as $}from"./chunk-DFA6WGYO-B0Vu_p_5.js";import{u as ee,a as te}from"./chunk-PCFUZKDS-D0UhgPz2.js";import{u as A,_ as E}from"./chunk-O6K7WXYN-j_mgpZSk.js";import{a as se,u as ae}from"./chunk-GW6TVOAA-B9BwkYKY.js";import{u as re}from"./chunk-2WQFRVK5-J0NX3UXr.js";import{S as oe,c as le}from"./chunk-ZCO6EK4W-CGeOXeyX.js";import{b as _,r as S,j as r,B as H,K as ne,E as ce,X as ie,aj as O,by as de,k as z,bx as ue,dL as pe,e as ge,dW as fe,a8 as me,f as D,J as y}from"./index-DpXzyKJ0.js";function be(a){return a.reduce((e,s)=>(e[s.value]=!0,e),{})}var Ne=({referenceType:a,type:e,setState:s,state:n})=>{const{t:c}=_(),m=e==="focus"?oe:le,[b,h]=S.useState(n),l=()=>{s(b)};return r.jsxs("div",{className:"flex size-full flex-col overflow-hidden",children:[r.jsx(m.Body,{className:"min-h-0 p-0",children:r.jsx(Se,{referenceType:a,initialRowState:be(n),intermediate:b,setIntermediate:h})}),r.jsxs(m.Footer,{children:[r.jsx(m.Close,{asChild:!0,children:r.jsx(H,{variant:"secondary",size:"small",type:"button",children:c("actions.cancel")})}),r.jsx(H,{type:"button",size:"small",onClick:l,children:c("actions.save")})]})]})},Se=({referenceType:a,...e})=>{switch(a){case G.CUSTOMER_GROUP:return r.jsx(he,{...e});case"product":return r.jsx(Pe,{...e});case G.PRODUCT_COLLECTION:return r.jsx(Te,{...e});case"product_type":return r.jsx(je,{...e});case G.PRODUCT_TAG:return r.jsx(Oe,{...e});default:return null}},i=50,L="cg",he=({initialRowState:a,intermediate:e,setIntermediate:s})=>{const{t:n}=_(),[c,m]=S.useState(a);F();const{searchParams:b,raw:h}=K({pageSize:i,prefix:L}),{customer_groups:l,count:d,isLoading:C,isError:P,error:w}=fe(b,{placeholderData:z}),x=o=>{const p=typeof o=="function"?o(c):o,g=Object.keys(c),f=Object.keys(p),R=f.filter(t=>!g.includes(t)),j=g.filter(t=>!f.includes(t)),I=(l==null?void 0:l.filter(t=>R.includes(t.id)).map(t=>({value:t.id,label:t.name})))||[],v=e.filter(t=>!j.includes(t.value));s([...v,...I]),m(p)},T=W(),u=Ce(),{table:k}=A({data:l||[],columns:u,count:d,enablePagination:!0,enableRowSelection:!0,getRowId:o=>o.id,rowSelection:{state:c,updater:x},pageSize:i,prefix:L});if(P)throw w;return r.jsx(E,{table:k,columns:u,pageSize:i,count:d,isLoading:C,filters:T,orderBy:[{key:"name",label:n("fields.name")},{key:"created_at",label:n("fields.createdAt")},{key:"updated_at",label:n("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:L,queryObject:h})},ye=D(),Ce=()=>{const a=Y();return S.useMemo(()=>[ye.display({id:"select",header:({table:e})=>r.jsx(y,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s)}),cell:({row:e})=>r.jsx(y,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),onClick:s=>{s.stopPropagation()}})}),...a],[a])},M="p",Pe=({initialRowState:a,intermediate:e,setIntermediate:s})=>{const{t:n}=_(),[c,m]=S.useState(a);F();const{searchParams:b,raw:h}=ee({pageSize:i,prefix:M}),{products:l,count:d,isLoading:C,isError:P,error:w}=ge(b,{placeholderData:z}),x=o=>{const p=typeof o=="function"?o(c):o,g=Object.keys(c),f=Object.keys(p),R=f.filter(t=>!g.includes(t)),j=g.filter(t=>!f.includes(t)),I=(l==null?void 0:l.filter(t=>R.includes(t.id)).map(t=>({value:t.id,label:t.title})))||[],v=e.filter(t=>!j.includes(t.value));s([...v,...I]),m(p)},T=re(),u=xe(),{table:k}=A({data:l||[],columns:u,count:d,enablePagination:!0,enableRowSelection:!0,getRowId:o=>o.id,rowSelection:{state:c,updater:x},pageSize:i,prefix:M});if(P)throw w;return r.jsx(E,{table:k,columns:u,pageSize:i,count:d,isLoading:C,filters:T,orderBy:[{key:"title",label:n("fields.title")},{key:"created_at",label:n("fields.createdAt")},{key:"updated_at",label:n("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:M,queryObject:h})},we=D(),xe=()=>{const a=te();return S.useMemo(()=>[we.display({id:"select",header:({table:e})=>r.jsx(y,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s)}),cell:({row:e})=>r.jsx(y,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),onClick:s=>{s.stopPropagation()}})}),...a],[a])},U="pc",Te=({initialRowState:a,intermediate:e,setIntermediate:s})=>{const{t:n}=_(),[c,m]=S.useState(a);F();const{searchParams:b,raw:h}=V({pageSize:i,prefix:U}),{collections:l,count:d,isLoading:C,isError:P,error:w}=pe(b,{placeholderData:z}),x=o=>{const p=typeof o=="function"?o(c):o,g=Object.keys(c),f=Object.keys(p),R=f.filter(t=>!g.includes(t)),j=g.filter(t=>!f.includes(t)),I=(l==null?void 0:l.filter(t=>R.includes(t.id)).map(t=>({value:t.id,label:t.title})))||[],v=e.filter(t=>!j.includes(t.value));s([...v,...I]),m(p)},T=ae(),u=Re(),{table:k}=A({data:l||[],columns:u,count:d,enablePagination:!0,enableRowSelection:!0,getRowId:o=>o.id,rowSelection:{state:c,updater:x},pageSize:i,prefix:U});if(P)throw w;return r.jsx(E,{table:k,columns:u,pageSize:i,count:d,isLoading:C,filters:T,orderBy:[{key:"title",label:n("fields.title")},{key:"created_at",label:n("fields.createdAt")},{key:"updated_at",label:n("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:U,queryObject:h})},ke=D(),Re=()=>{const a=$();return S.useMemo(()=>[ke.display({id:"select",header:({table:e})=>r.jsx(y,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s)}),cell:({row:e})=>r.jsx(y,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),onClick:s=>{s.stopPropagation()}})}),...a],[a])},B="pt",je=({initialRowState:a,intermediate:e,setIntermediate:s})=>{const{t:n}=_(),[c,m]=S.useState(a);F();const{searchParams:b,raw:h}=N({pageSize:i,prefix:B}),{product_types:l,count:d,isLoading:C,isError:P,error:w}=ue(b,{placeholderData:z}),x=o=>{const p=typeof o=="function"?o(c):o,g=Object.keys(c),f=Object.keys(p),R=f.filter(t=>!g.includes(t)),j=g.filter(t=>!f.includes(t)),I=(l==null?void 0:l.filter(t=>R.includes(t.id)).map(t=>({value:t.id,label:t.value})))||[],v=e.filter(t=>!j.includes(t.value));s([...v,...I]),m(p)},T=Q(),u=ve(),{table:k}=A({data:l||[],columns:u,count:d,enablePagination:!0,enableRowSelection:!0,getRowId:o=>o.id,rowSelection:{state:c,updater:x},pageSize:i,prefix:B});if(P)throw w;return r.jsx(E,{table:k,columns:u,pageSize:i,count:d,isLoading:C,filters:T,orderBy:[{key:"value",label:n("fields.value")},{key:"created_at",label:n("fields.createdAt")},{key:"updated_at",label:n("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:B,queryObject:h})},Ie=D(),ve=()=>{const a=J();return S.useMemo(()=>[Ie.display({id:"select",header:({table:e})=>r.jsx(y,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s)}),cell:({row:e})=>r.jsx(y,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),onClick:s=>{s.stopPropagation()}})}),...a],[a])},X="ptag",Oe=({initialRowState:a,intermediate:e,setIntermediate:s})=>{const{t:n}=_(),[c,m]=S.useState(a);F();const{searchParams:b,raw:h}=Z({pageSize:i,prefix:X}),{product_tags:l,count:d,isLoading:C,isError:P,error:w}=de(b,{placeholderData:z}),x=o=>{const p=typeof o=="function"?o(c):o,g=Object.keys(c),f=Object.keys(p),R=f.filter(t=>!g.includes(t)),j=g.filter(t=>!f.includes(t)),I=(l==null?void 0:l.filter(t=>R.includes(t.id)).map(t=>({value:t.id,label:t.value})))||[],v=e.filter(t=>!j.includes(t.value));s([...v,...I]),m(p)},T=se(),u=Ae(),{table:k}=A({data:l||[],columns:u,count:d,enablePagination:!0,enableRowSelection:!0,getRowId:o=>o.id,rowSelection:{state:c,updater:x},pageSize:i,prefix:X});if(P)throw w;return r.jsx(E,{table:k,columns:u,pageSize:i,count:d,isLoading:C,filters:T,orderBy:[{key:"value",label:n("fields.value")},{key:"created_at",label:n("fields.createdAt")},{key:"updated_at",label:n("fields.updatedAt")}],layout:"fill",pagination:!0,search:!0,prefix:X,queryObject:h})},_e=D(),Ae=()=>{const a=q();return S.useMemo(()=>[_e.display({id:"select",header:({table:e})=>r.jsx(y,{checked:e.getIsSomePageRowsSelected()?"indeterminate":e.getIsAllPageRowsSelected(),onCheckedChange:s=>e.toggleAllPageRowsSelected(!!s)}),cell:({row:e})=>r.jsx(y,{checked:e.getIsSelected(),onCheckedChange:s=>e.toggleSelected(!!s),onClick:s=>{s.stopPropagation()}})}),...a],[a])},F=()=>{const[a,e]=me();S.useEffect(()=>()=>{e({})},[])},Qe=({index:a,label:e,onRemove:s})=>r.jsxs("div",{className:"bg-ui-bg-field-component shadow-borders-base flex items-center justify-between gap-2 rounded-md px-2 py-0.5",children:[r.jsx(ne,{size:"small",leading:"compact",children:e}),r.jsx(ce,{size:"small",variant:"transparent",type:"button",onClick:()=>s(a),children:r.jsx(ie,{})})]}),Ee=O.object({value:O.string(),label:O.string()});O.object({reference_type:O.nativeEnum(G),references:O.array(Ee)});var Je=a=>a.references.map(e=>({reference:a.reference_type,reference_id:e.value}));export{Ne as T,Qe as a,Ee as b,Je as c};
