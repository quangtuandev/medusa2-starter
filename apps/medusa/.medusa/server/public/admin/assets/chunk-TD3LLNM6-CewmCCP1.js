import{u as rt}from"./chunk-C76H5USB-DgXYXjlf.js";import{u as ot,s as F,a as lt}from"./chunk-PWBTCXBJ-Cf2-uLa4.js";import{b as p,r as u,a8 as it,u as ct,cK as dt,j as s,cL as d,M as ut,H as ft,K as gt,A as P,B as A,L as mt}from"./index-C3yGK_aL.js";const ht=()=>({accessor:(t,e)=>({id:t,...e}),custom:t=>t});var Ft=({data:t=[],columns:e,filters:a,commands:o,action:i,actionMenu:g,getRowId:E,rowCount:k=0,enablePagination:j=!0,enableSearch:S=!0,autoFocusSearch:q=!1,rowHref:h,heading:y,subHeading:D,prefix:c,pageSize:T=10,emptyState:R,rowSelection:B,isLoading:V=!1,layout:J="auto"})=>{const{t:m}=p(),C=a&&a.length>0,Q=o&&o.length>0,w=e.some(n=>n.enableSorting),b=u.useMemo(()=>(a==null?void 0:a.map(n=>n.id))??[],[a]),I=b.map(n=>f(n,c)),{offset:M,order:O,q:L,...N}=rt([...b,...w?["order"]:[],...S?["q"]:[],...j?["offset"]:[]],c),[Tt,x]=it(),H=u.useMemo(()=>L??"",[L]),W=n=>{x(r=>(n?r.set(f("q",c),n):r.delete(f("q",c)),r))},z=u.useMemo(()=>M?jt(M,T):{pageIndex:0,pageSize:T},[M,T]),G=n=>{x(r=>(n.pageIndex===0?r.delete(f("offset",c)):r.set(f("offset",c),pt(n).toString()),r))},U=u.useMemo(()=>St(b,N),[b,N]),X=n=>{x(r=>(Array.from(r.keys()).forEach(l=>{I.includes(l)&&!(l in n)&&r.delete(l)}),Object.entries(n).forEach(([l,$])=>{I.includes(f(l,c))&&$&&r.set(f(l,c),JSON.stringify($))}),r))},Y=u.useMemo(()=>O?xt(O):null,[O]),Z=n=>{x(r=>{if(n){const l=bt(n);r.set(f("order",c),l)}else r.delete(f("order",c));return r})},{pagination:tt,toolbar:et}=yt(),v=ct(),at=u.useCallback((n,r)=>{if(!h)return;const l=h(r);if(n.metaKey||n.ctrlKey||n.button===1){window.open(l,"_blank","noreferrer");return}if(n.shiftKey){window.open(l,void 0,"noreferrer");return}v(l)},[v,h]),st=dt({data:t,columns:e,filters:a,commands:o,rowCount:k,getRowId:E,onRowClick:h?at:void 0,pagination:j?{state:z,onPaginationChange:G}:void 0,filtering:C?{state:U,onFilteringChange:X}:void 0,sorting:w?{state:Y,onSortingChange:Z}:void 0,search:S?{state:H,onSearchChange:W}:void 0,rowSelection:B,isLoading:V}),nt=y||D;return s.jsxs(d,{instance:st,className:ut({"h-full [&_tr]:last-of-type:!border-b":J==="fill"}),children:[s.jsxs(d.Toolbar,{className:"flex flex-col items-start justify-between gap-2 md:flex-row md:items-center",translations:et,children:[s.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[nt&&s.jsxs("div",{children:[y&&s.jsx(ft,{children:y}),D&&s.jsx(gt,{size:"small",className:"text-ui-fg-subtle",children:D})]}),s.jsxs("div",{className:"flex items-center justify-end gap-x-2 md:hidden",children:[C&&s.jsx(d.FilterMenu,{tooltip:m("filters.filterLabel")}),s.jsx(d.SortingMenu,{tooltip:m("filters.sortLabel")}),g&&s.jsx(P,{variant:"primary",...g}),i&&s.jsx(K,{...i})]})]}),s.jsxs("div",{className:"flex w-full items-center gap-2 md:justify-end",children:[S&&s.jsx("div",{className:"w-full md:w-auto",children:s.jsx(d.Search,{placeholder:m("filters.searchLabel"),autoFocus:q})}),s.jsxs("div",{className:"hidden items-center gap-x-2 md:flex",children:[C&&s.jsx(d.FilterMenu,{tooltip:m("filters.filterLabel")}),s.jsx(d.SortingMenu,{tooltip:m("filters.sortLabel")}),g&&s.jsx(P,{variant:"primary",...g}),i&&s.jsx(K,{...i})]})]})]}),s.jsx(d.Table,{emptyState:R}),j&&s.jsx(d.Pagination,{translations:tt}),Q&&s.jsx(d.CommandBar,{selectedLabel:n=>`${n} selected`})]})};function bt(t){return t.desc?`-${t.id}`:t.id}function xt(t){return t.startsWith("-")?{id:t.slice(1),desc:!0}:{id:t,desc:!1}}function pt(t){return t.pageIndex*t.pageSize}function jt(t,e){const a=parseInt(t);return{pageIndex:Math.floor(a/e),pageSize:e}}function St(t,e){if(!e)return{};const a={};for(const o of t){const i=e[o];i&&(a[o]=JSON.parse(i))}return a}function f(t,e){return e?`${e}_${t}`:t}var yt=()=>{const{t}=p(),e={of:t("general.of"),results:t("general.results"),pages:t("general.pages"),prev:t("general.prev"),next:t("general.next")},a={clearAll:t("actions.clearAll")};return{pagination:e,toolbar:a}},K=({label:t,disabled:e,...a})=>{const o={size:"small",disabled:e??!1,type:"button",variant:"secondary"};return"to"in a?s.jsx(A,{...o,asChild:!0,children:s.jsx(mt,{to:a.to,children:t})}):s.jsx(A,{...o,onClick:a.onClick,children:t})},_=ht(),Dt=()=>{const{t}=p(),e=u.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),a},[]);return u.useMemo(()=>[{label:t("filters.date.today"),value:{$gte:e.toISOString()}},{label:t("filters.date.lastSevenDays"),value:{$gte:F(e,7).toISOString()}},{label:t("filters.date.lastThirtyDays"),value:{$gte:F(e,30).toISOString()}},{label:t("filters.date.lastNinetyDays"),value:{$gte:F(e,90).toISOString()}},{label:t("filters.date.lastTwelveMonths"),value:{$gte:lt(e,12).toISOString()}}],[e,t])},wt=t=>{const{t:e}=p(),{getFullDate:a}=ot(),o=Dt(),i=u.useMemo(()=>({rangeOptionStartLabel:e("filters.date.starting"),rangeOptionEndLabel:e("filters.date.ending"),rangeOptionLabel:e("filters.date.custom"),options:o}),[t,e,o]);return u.useMemo(()=>[_.accessor("created_at",{type:"date",label:e("fields.createdAt"),format:"date",formatDateValue:g=>a({date:g}),options:o,...i}),_.accessor("updated_at",{type:"date",label:e("fields.updatedAt"),format:"date",formatDateValue:g=>a({date:g}),options:o,...i})],[e,o,a,i])};export{Ft as D,ht as c,wt as u};
