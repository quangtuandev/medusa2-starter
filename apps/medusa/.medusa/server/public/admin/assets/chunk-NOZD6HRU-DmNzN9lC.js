import{e as w,f as E,g as T,h as q}from"./chunk-GE4APTT2-XZNc9GBX.js";import{j as a,z as D,r as f,cL as L,ai as R}from"./index-BUDxroKx.js";import{C as V}from"./index.esm-C9OiFhnl.js";var S=({context:l,disabledToggleTooltip:h,...i})=>{const{field:c,control:u,renderProps:e}=w({context:l}),p=E({context:l}),{container:t,input:r}=e;return a.jsx(D,{control:u,name:c,render:({field:d})=>a.jsx(T,{...t,...p,outerComponent:a.jsx(B,{field:d,inputProps:r,isAnchor:t.isAnchor,tooltip:h}),children:a.jsx(I,{field:d,inputProps:r,...i})})})},B=({field:l,inputProps:h,isAnchor:i,tooltip:c})=>{const u=f.useRef(null),{value:e}=l,{onChange:p}=h,[t,r]=f.useState(e);f.useEffect(()=>{r(e)},[e]);const d=o=>{const n={...t,checked:o};!o&&!n.disabledToggle&&(n.quantity=""),o&&n.quantity===""&&(n.quantity=0),r(n),p(n,e)};return f.useEffect(()=>{const o=n=>{var g;i&&n.key.toLowerCase()==="x"&&(n.preventDefault(),(g=u.current)==null||g.click())};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[i]),a.jsx(L,{showTooltip:t.disabledToggle&&c,content:c,children:a.jsx("div",{className:"absolute inset-y-0 left-4 z-[3] flex w-fit items-center justify-center",children:a.jsx(R,{ref:u,size:"small",className:"shrink-0",checked:t.checked,disabled:t.disabledToggle,onCheckedChange:d})})})},I=({field:l,inputProps:h,placeholder:i,...c})=>{const{ref:u,value:e,onChange:p,onBlur:t,...r}=l,{ref:d,onChange:o,onBlur:n,onFocus:g,...v}=h,[s,C]=f.useState(e);f.useEffect(()=>{C(e)},[e]);const k=q(d,u),y=(x,N,P)=>{const b=x!==void 0?x:"",m={...s,quantity:b};b!==""?m.checked=!0:m.checked&&m.disabledToggle===!1&&(m.checked=!1),C(m)},j=()=>{s.disabledToggle&&s.quantity===""&&(s.quantity=0),o(s,e)};return a.jsx("div",{className:"flex size-full items-center gap-x-2",children:a.jsx(V,{...r,...v,...c,ref:k,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:s==null?void 0:s.quantity,onValueChange:y,formatValueOnBlur:!0,onBlur:()=>{t(),n(),j()},onFocus:g,decimalsLimit:0,autoComplete:"off",tabIndex:-1,placeholder:s.checked?void 0:i})})};export{S as D};
